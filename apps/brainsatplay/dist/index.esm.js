var oo=Object.defineProperty;var C=(e,t)=>{for(var o in t)oo(e,o,{get:t[o],enumerable:!0})};var ve={};C(ve,{content:()=>ho,footer:()=>yo,nav:()=>mo});var ie={};C(ie,{__onconnected:()=>no,container:()=>ro});function no(){this.header!==void 0&&(this.container.header.__element.innerText=this.header),this.text!==void 0&&(this.container.text.__element.innerHTML=this.text)}var ro={__:Symbol("container"),header:{__element:"h3",__attributes:{innerText:"Header"}},text:{__element:"p",__attributes:{innerHTML:"This is the text."}}};var V={};C(V,{__attributes:()=>io,__onconnected:()=>so,container:()=>ao});function so(){["number","title","description"].forEach(t=>{this[t]!==void 0&&(this.container[t].__element.innerText=this[t])}),this.projects!==void 0&&this.projects.forEach(t=>{let o=document.createElement("li"),n=document.createElement("a"),r=document.createElement("sub");r.style.fontSize="75%",r.style.userSelect="none",t.active===!1?(o.style.opacity="0.5",o.style.pointerEvents="none",o.style.userSelect="none"):(t.oncreate&&t.oncreate(o),t.onclick?n.onclick=t.onclick:t.href&&(n.href=t.href)),o.appendChild(n),o.appendChild(r),n.innerText=t.name,r.innerText=` ${t.version}`,this.container.projects.__element.appendChild(o)})}var io={style:{padding:"1rem"}},ao={__:Symbol("container"),number:{__element:"p",__attributes:{innerText:"",style:{fontSize:"0.9rem",paddingBottom:"0.5rem",margin:"0px"}}},title:{__element:"h3",__attributes:{innerText:"Feature"}},description:{__element:"p",__attributes:{innerText:"This is a feature that is featured."}},projects:{__element:"ul"}};var xe={};C(xe,{__element:()=>fo,__onconnected:()=>uo,channel:()=>lo,height:()=>po,width:()=>co});var lo="brainsatplay",co="100%",po=480,fo="div",uo=function(){let e=document.createElement("script");e.src="https://embed.twitch.tv/embed/v1.js",document.body.appendChild(e),e.onload=()=>{new Twitch.Embed(this.__element,{width:this.width,height:this.height,channel:this.channel})}};var it={borderBottom:"2px solid white",paddingBottom:"0.5rem",paddingRight:"1rem"},at={list:[],__element:"ul",__onconnected:function(){this.__element.innerHTML="",this.list.forEach(e=>{let t=document.createElement("li"),o=document.createElement("a");o.innerText=e.label,t.appendChild(o),this.__element.appendChild(t),e.oncreate&&e.oncreate(t),e.onclick?o.onclick=e.onclick:o.href=e.href})}},lt=[{label:"Home",href:"/"},{label:"About",href:"#about"},{label:"Work",href:"#work"},{label:"Ethos",href:"#ethos"},{label:"Twitch",href:"#twitch"}],mo={__element:"nav",__childposition:0,__attributes:{style:{position:"fixed",top:"0px",right:"0px",paddingRight:"2rem"}},list:{list:lt,__compose:at,__attributes:{style:{textTransform:"uppercase"}}}},ho={__element:"main",__childposition:0,hero:{__element:"section",__childposition:0,container:{__:Symbol("container"),title:{__element:"h1",__attributes:{innerText:"Brains@Play"}},subtitle:{__element:"h2",__attributes:{innerText:"The Universal Web Development Cooperative"}},description:{__element:"p",__attributes:{innerText:"We empower everyone to build better apps\u2014together."}}}},about:{__element:"section",__childposition:1,__attributes:{style:{background:"darkslategray"}},container:{__:Symbol("container"),title:{__:Symbol("title"),text:{__element:"h2",__attributes:{innerText:"About Us"}},support:{__element:"a",__attributes:{href:"https://opencollective.com/brainsatplay",target:"_blank"},image:{__element:"img",__attributes:{height:40,src:"https://opencollective.com/brainsatplay/contribute/button@2x.png?color=white"}}},__attributes:{style:{display:"flex",justifyContent:"space-between",alignItems:"center",...it}}},description:{__element:"p",__attributes:{innerHTML:"Brains@Play is currently led by two developers\u2014<a href='https://github.com/garrettmflynn' target='_blank'>Garrett Flynn</a> and <a href='https://github.com/garrettmflynn' target='_blank'>Joshua Brewster</a>\u2014working to build a better Web with free software."}},statements:{__:Symbol("statements"),__attributes:{style:{display:"flex",flexWrap:"wrap"}},mission:{header:"Mission",text:"Make code universally <a>shareable</a>, <a>modifiable</a>, and <a>usable</a>.",__compose:ie,__attributes:{style:{flexBasis:"50%",padding:"15px"}}},vision:{header:"Vision",text:"Engulf the Web in public experiments of communal organization and citizen science, engineering, and art.",__compose:ie,__attributes:{style:{flexBasis:"50%",padding:"15px"}}}}}},ethos:{__element:"section",__childposition:2,container:{__:Symbol("container"),title:{__element:"h2",__attributes:{innerText:"Our Ethos",style:{...it}}},featureone:{number:"1",title:"Recompose the Web",description:"We are consuming the infrastructure of the Web.",projects:[{name:"ES Components (ESC)",link:"https://github.com/brainsatplay/escomponent",version:"0.1.7",description:"A specification for composable JavaScript objects with concurrent message-passing."},{name:"ESCode",link:"https://github.com/brainsatplay/escode",version:"0.2.0",description:"A framework for using ES Components using graphscript."},{name:"Web Source Accessibility Guidelines (WSAG)",active:!1,version:"0.0.0",description:"Identify best practices to allow anyone to use, modify, and share Web Components."}],__compose:V},featuretwo:{number:"2",title:"Make Software Yours",description:"Bring yourself to every page.",projects:[{name:"Browser Extension",link:"https://github.com/brainsatplay/brainsatplay-extension",version:"0.0.0",oncreate:e=>{let t="brainsatplay-injection-proxy",o=r=>{window.postMessage({source:r,command:"openOptions"})},n=()=>{let r=!1;e.onclick=()=>{let s="https://github.com/brainsatplay/brainsatplay-extension";window.open(s,"_blank")};let i=document.getElementById(t);if(i&&i.getAttribute("data-version")){let c=i.getAttribute("data-id");r=!0,e.onclick=()=>o(c)}return r};window.onload=function(){n()||setTimeout(n,100)}},description:"Apply components across web pages."},{name:"Desktop App",link:"https://github.com/brainsatplay/brainsatplay-electron",version:"0.0.0",onclick:()=>{customProtocolCheck("brainsatplay://",()=>{window.open("https://github.com/brainsatplay/brainsatplay-desktop","_blank"),console.log("Custom protocol not found.")},()=>{console.log("Custom protocol found and opened the file successfully.")})},description:"Create composable cross-platform web systems."}],__compose:V},featurethree:{number:"3",title:"Free Public Experimentation",description:"We are supporting new scientific and human-computer interaction (HCI) advances that drive experimentation on the Web and translate quickly across sites.",projects:[{name:"WebNWB",link:"https://github.com/brainsatplay/webnwb",description:"Enable citizen neuroscience.",version:"0.0.12"},{name:"MyAlyce",link:"https://myalyce.com",description:"Enable citizen neuroscience.",version:"0.0.0"}],__compose:V}}},twitch:xe},yo={__element:"footer",__childposition:2,__attributes:{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",backgroundColor:"black",color:"white",padding:"25px 50px"}},title:{text:{__element:"span",__attributes:{innerText:"\xA9 Brains@Play 2022"}}},links:{__compose:at,list:[...lt]},social:{__element:"ul",email:{__element:"li",link:{__element:"a",__attributes:{href:"mailto:contact@brainsatplay.com",innerText:"contact@brainsatplay.com"}}},newsletter:{__element:"li",link:{__element:"a",__attributes:{href:"https://brainsatplay.substack.com",innerText:"Sign up for our newsletter",style:{fontSize:"0.8rem"}}}}}};var Se={};C(Se,{hero:()=>bo});var bo={__element:"section",container:{title:{__element:"h1",__childposition:0,__attributes:{innerText:"About Us"}},subtitle:{__element:"h2",__childposition:1,__attributes:{innerText:"It all began with a dream of agency for every brain."}},description:{__element:"p",__childposition:2,__attributes:{innerText:"We started working in 2021 and never stopped."}},message:{__element:"p",__childposition:3,__attributes:{innerText:"Now it's cool to have a brain!"}}}};var Pe={};C(Pe,{hero:()=>go});var go={__element:"section",container:{title:{__element:"h1",__attributes:{innerText:"Our Work"}},subtitle:{__element:"h2",__attributes:{innerText:"The Universal Web Development Cooperative"}}}};var _o="[object Module]",z=e=>!!(e&&(!!Object.keys(e).reduce((o,n)=>{let r=Object.getOwnPropertyDescriptor(e,n),i=r&&r.get&&!r.set?1:0;return o+i},0)||Object.prototype.toString.call(e)===_o));var pt=(e,t)=>{if(e&&typeof e=="object"&&t&&typeof t=="object"){let o=JSON.stringify(e),n=JSON.stringify(t);return o===n}else return e===t},W=(e,t)=>Promise.all(Object.getOwnPropertySymbols(e).map(o=>t(o,e[o]))),k=(e,t)=>{let o=t.path[e];if(!o)throw new Error("Invalid Path Type");return o.filter(r=>typeof r=="string").join(t.keySeparator)},ae=(e,t)=>{let o=e;return typeof e=="string"?o=e.split(t.keySeparator):typeof e=="symbol"&&(o=[e]),{id:o[0],path:o.slice(1)}},F=(e,t,o,n,r=!0)=>{if(e instanceof Function&&(n&&typeof n=="object"&&typeof n.then=="function"?n.then(i=>e(t,o,i)):e(t,o,n)),r&&globalThis.ESMonitorState){let i=globalThis.ESMonitorState.callback;globalThis.ESMonitorState.state[t]={output:n,value:o},F(i,t,o,n,!1)}};var xo=60,Y=class{constructor(t,o){this.listeners={};this.setOptions=(t={})=>{for(let o in t)this[o]=t[o]};this.add=t=>{let o=t.sub;return this.listeners[o]=t,this.start(),!0};this.get=t=>this.listeners[t];this.remove=t=>{delete this.listeners[t],Object.keys(this.listeners).length||this.stop()};this.poll=t=>{W(t,(o,n)=>{let{callback:r,current:i,history:s}=n;n.path.resolved||(n.path.resolved=k("output",n)),pt(i,s)||(F(r,n.path.resolved,{},i),typeof i=="object"?Array.isArray(i)?s=[...i]:s={...i}:t[o].history=i)})};this.start=(t=this.listeners)=>{this.sps?this.#e||(console.warn("[esmonitor]: Starting Polling!"),this.#e=setInterval(()=>this.poll(t),1e3/this.sps)):this.sps=xo};this.stop=()=>{this.#e&&(console.warn("[esmonitor]: Stopped Polling!"),clearInterval(this.#e),this.#e=void 0)};t&&(this.listeners=t),o&&(this.sps=o)}#e;#t;get sps(){return this.#t}set sps(t){this.#t=t;let o=this.listeners;Object.keys(o).length&&(this.stop(),this.start())}};var Q={};C(Q,{functionExecution:()=>ue,functions:()=>xt,getProxyFunction:()=>je,info:()=>de,register:()=>gt,set:()=>ke,setterExecution:()=>fe,setters:()=>Ae});var X=Symbol("isProxy");globalThis.ESMonitorState={state:{},callback:void 0,info:{}};var ut=globalThis.ESMonitorState;var vo=async(e,t)=>{let o=globalThis.performance.now(),n=await e(...t),r=globalThis.performance.now();return{output:n,value:r-o}},mt={performance:vo},dt=(e,t,o)=>{let n={value:{},output:void 0},r={...ut.info,...o};for(let i in r)if(r[i]&&mt[i]){let s=e;e=async(...c)=>{let l=await mt[i](s,c);return n.value[i]=l.value,l.output}}return n.output=e(...t),n};var E=".",Po="default",D="__esmpileSourceBundle",Ee={root:"__",properties:"__props",default:Po,operator:"__operator",children:"__children",listeners:{value:"__listeners",branch:"__branch",bind:"__bind",trigger:"__trigger",format:"__format"},parent:"__parent",promise:"__childresolved",component:"__component",proxy:"__proxy"},a={...Ee,start:"__onconnected",stop:"__ondisconnected",connected:"__connected",resolved:"__resolved",started:"__started",element:"__element",webcomponents:"__define",attributes:"__attributes",trigger:"__trigger",compose:"__compose",apply:"__apply",uri:"src",reference:"ref",childPosition:"__childposition",attribute:"escomponent",options:"__options",source:"__source",path:"__path",animate:"__animate",states:"__states",editor:"__editor",original:"__original",resize:"__onresize"};var ht=(e,t)=>e in t,Eo=(e,t,o)=>{let n=t[e[0]];if(n){let r=n[e.slice(1).join(o)];if(r)return r}},le=(e,t,o={})=>{let n=o.fallbacks??[],r=o.keySeparator??E;if(o.shortcuts){let l=Eo(t,o.shortcuts,r);if(l)return o.output==="info"?{value:l,exists:!0,shortcut:!0}:l}typeof t=="string"?t=t.split(r).flat():typeof t=="symbol"&&(t=[t]);let i;t=[...t],t=t.map(l=>typeof l=="string"?l.split(r):l).flat();let s=e,c=[s];for(let l=0;l<t.length;l++)if(s){let p=t[l];i=ht(p,s),i?s=s[p]:(s=void 0,i=!0),c.push(s)}return o.output==="info"?{value:s,exists:i,parent:c[c.length-2]}:s},ce=(e,t,o,n={})=>{let r=n?.create??!1,i=n?.keySeparator??E;typeof e=="string"?e=e.split(i):typeof e=="symbol"&&(e=[e]),e=[...e];let s=[...e],c=s.pop();for(let l=0;l<s.length;l++){let p=s[l],f=ht(p,o);r&&!f&&(o[p]={},f=!0),f&&(o=o[p])}return o[c]=t,!0};var Ce={};C(Ce,{functions:()=>Oo,objects:()=>Oe});var I=X,Z=Symbol("fromInspectable"),Xn=Symbol("fromInspectableHandler");function wo(e,t){let o=this,n=this.target;if(!this.parent){let r=n[e];try{Object.defineProperty(n,e,{get:()=>r,set:function(i){r=i,o.proxy[e]={[I]:this[I],[Z]:!0,value:i}},enumerable:!0,configurable:!0})}catch{console.error(`Could not reassign ${e} to a top-level setter...`)}}t&&this.newKeys.add(e),this.create(e,n,void 0,!0)}var pe=wo;var Oo=function(){let e=this;return{apply:async function(t,o,n){try{let r=t;n[0]?.[Z]&&(r=n[0].value,n=n.slice(1));let s=e.listeners.functions,c=e.path.join(e.options.keySeparator),l=s?s[c]:void 0,p,f={};l?(f=ue(o,l,r,n),p=f.output):(p=r.apply(o,n),f=e?.state?.[c]?.value??{});let m=e.options.callback;return F(m,c,f,p),p}catch(r){console.warn("Function failed:",r,e.path)}}}},Oe=function(){let e=this;return{get(t,o,n){return o===I?!0:Reflect.get(t,o,n)},set(t,o,n,r){if(o===I)return!0;let i=[...e.path,o].join(e.options.keySeparator),s=n?.[I],c=n?.[Z];c&&(n=n.value);let l=e.listeners.setters,p=Object.getOwnPropertyDescriptor(t,o);if(p&&!p.get&&!p.set&&typeof e.options.globalCallback=="function"){let d=e.path[0];pe.call(e,o,!0),ke("setters",i,n,e.options.globalCallback,{[d]:e.root},e.listeners,e.options)}if(n||typeof n=="function"){let d=e.create(o,t,n);d&&(n=d)}let m=!s;if(l&&m&&!e.newKeys.has(o)){let d=l[i];d&&fe(d,n)}let h=e.options.callback,v=e?.state?.[i]?.value??{};return F(h,i,v,n),c||!m?!0:Reflect.set(t,o,n,r)}}};var T=typeof process=="object";var Co=(e,t,o)=>{try{o===void 0&&(o=e[t])}catch(p){return p}if(e[t]&&e[t][I])return!1;let r=typeof o,i=r==="object",s=r=="function";if(!o||!(i||s)||!T&&o instanceof globalThis.Element||o instanceof EventTarget)return!1;let l=i&&z(o);if(s)return!0;{let p=Object.getOwnPropertyDescriptor(e,t);if(p&&(p.value&&p.writable||p.set)){if(!l)return!0}else if(!e.hasOwnProperty(t))return!0}return!1},B=class{constructor(t={},o={},n,r){this.path=[];this.listeners={};this.newKeys=new Set;this.state={};this.set=(t,o,n)=>{this.state[t]={output:n,value:o},ce(t,n,this.proxy,{create:!0})};this.check=Co;this.create=(t,o,n,r=!1)=>{let i=this.check(o,t,n);if(n===void 0&&(n=o[t]),i&&!(i instanceof Error))return o[t]=new B(n,this.options,t,this),o[t];if(r)try{this.proxy[t]=n??o[t]}catch(s){let c=z(o),l=[...this.path,t];console.error(`Could not set value (${l.join(this.options.keySeparator)})${c?" because the parent is an ESM.":""}`,c?"":s)}};if(o.pathFormat||(o.pathFormat="relative"),o.keySeparator||(o.keySeparator=E),t.__proxy)this.proxy=t.__proxy;else if(t[I])this.proxy=t;else{this.target=t,this.options=o,this.parent=r,this.parent?(this.root=this.parent.root,this.path=[...this.parent.path],this.state=this.parent.state??{}):this.root=t,n&&this.path.push(n),this.options.listeners&&(this.listeners=this.options.listeners),this.options.path&&(this.options.path instanceof Function?this.path=this.options.path(this.path):Array.isArray(this.options.path)?this.path=this.options.path:console.log("Invalid path",this.options.path)),this.path&&(this.path=this.path.filter(c=>typeof c=="string")),this.options.keySeparator||(this.options.keySeparator=E);let i=this.options.type;i!="object"&&(i=typeof t=="function"?"function":"object");let s=Ce[`${i}s`].call(this);i==="function"&&(s={...s,...Oe.call(this)}),this.proxy=new Proxy(t,s),Object.defineProperty(t,"__proxy",{value:this.proxy,enumerable:!1}),Object.defineProperty(t,"__esInspectable",{value:this,enumerable:!1});for(let c in t)pe.call(this,c)}return this.proxy}};var yt=!1,me=(e,t,o,n)=>{let r=n.reference,i=Array.isArray(e)?e[0]:typeof e=="string"?e.split(o.keySeparator)[0]:e,s=n.hasOwnProperty("static")?!n.static:!1;s&&!globalThis.Proxy?(s=!1,console.warn("Falling back to using function interception and setters...")):yt||(console.error("TODO: Finish integration of esmonitor-proxy with the core..."),yt=!0),s&&(t=new B(t,{pathFormat:o.pathFormat,keySeparator:o.keySeparator,listeners:n.listeners,path:l=>l.filter(p=>!o.fallbacks||!o.fallbacks.includes(p))},i));let c={keySeparator:o.keySeparator,...n};return ce(e,t,r,c),t};var de=(e,t,o,n,r,i,s,c={})=>{typeof o=="string"&&(o=o.split(s.keySeparator));let l=o.join(s.keySeparator),p=r,f=c.ref,m=c.path,h=b=>le(f??r,b,{keySeparator:s.keySeparator,fallbacks:s.fallbacks}),v=(b,S)=>{me(b,S,s,{reference:f??r,listeners:i})},d=s.onUpdate,x={};d&&typeof d=="object"&&d.callback instanceof Function&&(x=d.info??{},d=d.callback);let _=[e,...o],y={absolute:_,relative:l.split(s.keySeparator),parent:_.slice(0,-1)};y.output=y[s.pathFormat];let g={id:e,path:y,keySeparator:s.keySeparator,infoToOutput:x,callback:(...b)=>{let S=t(...b);return d instanceof Function&&d(...b),S},get current(){return h(m??g.path.absolute)},set current(b){v(m??g.path.absolute,b)},get parent(){return h(m?m?.slice(0,-1):g.path.parent)},get reference(){return p[e]},set reference(b){p[e]=b},original:n,history:typeof n=="object"?Object.assign({},n):n,sub:Symbol("subscription"),last:o.slice(-1)[0]};return g},bt=(e,t,o)=>{if(o){let n=Math.random();o.symbol[t]={name:e,id:n},o.name[e]||(o.name[e]={}),o.name[e][n]=t}},gt=(e,t,o)=>{let n=k("absolute",e);return t[n]||(t[n]={}),t[n][e.sub]=e,bt(n,e.sub,o),!0},Te={functions:xt,setters:Ae},ke=(e,t,o,n,r,i,s)=>{let{id:c,path:l}=ae(t,s),p=de(c,n,l,o,r,Te,s);if(Te[e])Te[e](p,i,i.lookup);else{let f=k("absolute",p);i[e][f][p.sub]=p,i.lookup&&bt(f,p.sub,i.lookup)}},ko=(e,t)=>t[k("absolute",e)],_t=(e,t,o,n)=>{let r=!!ko(e,t);if(!r){let i=e.parent,s=i?.[e.last];r=o(s,i)}return gt(e,t,n)},fe=(e,t)=>W(e,(o,n)=>{let r=k("output",n);F(n.callback,r,{},t)});function Ae(e,t,o){let n=this;return _t(e,t.setters,(r,i)=>{let s=r;if(!!i&&!i[X]){let c=!0;try{delete i[e.last]}catch{console.error("Unable to redeclare setters. May already be a dynamic object..."),c=!1}if(c){let l=e.last.slice(0,2)==="__"||e.last==="default";try{Object.defineProperty(i,e.last,{get:()=>s,set:async p=>{let f=typeof s=="function";if(s=p,f)s=je.call(n,e,t,s);else{let m=Object.assign({},t.setters[k("absolute",e)]);fe(m,p)}},enumerable:!l,configurable:!0})}catch(p){throw p}}}},o)}function je(e,t,o){return function(...n){let r=t.functions[k("absolute",e)];return ue(this,r,o??e.original,n).output}}var ue=(e,t,o,n)=>{t=Object.assign({},t);let r=Object.getOwnPropertySymbols(t),i=t[r[0]]??{},s=dt((...c)=>o.call(e,...c),n,i.infoToOutput);return W(t,(c,l)=>{let p=k("output",l);F(l.callback,p,s.value,s.output)}),s};function xt(e,t,o){return _t(e,t.functions,(n,r)=>{if(!r[X])return r[e.last]=je.call(this,e,t),Ae(e,t,o)},o)}var M=Symbol("abort"),vt=(e,t=[])=>({typeof:typeof e,name:e?.constructor?.name,simple:!0,object:e&&typeof e=="object",path:t}),ee=(e,t,o={})=>{let n=o.accumulator;n||(n=o.accumulator={});let r=o.ignore||[],i=o.path||[],s=o.condition||!0,c=[],l=[],p=(f,m={},h)=>{let v=h.path;if(v.length===0&&!(s instanceof Function?s(void 0,f,{...vt(f,v)}):s))return f;for(let d in f){if(o.abort)return;if(r.includes(d))continue;let x=f[d],_=[...v,d],y=vt(x,_);if(y.object){let u=y.name;if(z(x)||u==="Object"||u==="Array"){y.simple=!0;let b=c.indexOf(x);if(b!==-1)m[d]=l[b];else{c.push(x);let S=s instanceof Function?s(d,x,y):s;y.pass=S;let P=t(d,x,y);if(P===M)return M;if(m[d]=P,S){l.push(m[d]);let O=p(x,m[d],{...h,path:_});if(O===M)return M;m[d]=O}}}else{y.simple=!1;let b=t(d,x,y);if(b===M)return M;m[d]=b}}else{let u=t(d,x,y);if(u===M)return M;m[d]=u}}return m};return p(e,n,{path:i})};var St=()=>({symbol:{},name:{}}),To=typeof process=="object",te=class{constructor(t={}){this.poller=new Y;this.options={pathFormat:"relative",keySeparator:E};this.listeners={polling:this.poller.listeners,functions:{},setters:{},lookup:St()};this.references={};this.get=(t,o,n=this.references)=>le(n,t,{keySeparator:this.options.keySeparator,fallbacks:this.options.fallbacks,output:o});this.set=(t,o,n={})=>{let r={...n};return r.reference||(r.reference=this.references),r.listeners||(r.listeners=this.listeners),me(t,o,this.options,r)};this.on=(t,o)=>{let n=ae(t,this.options);return this.listen(n.id,o,n.path)};this.getInfo=(t,o,n,r)=>{let i=de(t,o,n,r,this.references,this.listeners,this.options),s=Math.random(),c=this.listeners.lookup,l=k("absolute",i);return c.symbol[i.sub]={name:l,id:s},c.name[l]||(c.name[l]={}),c.name[l][s]=i.sub,i};this.listen=(t,o,n=[],r={})=>{typeof n=="string"?n=n.split(this.options.keySeparator):typeof n=="symbol"&&(n=[n]);let i=n,s=this.get(t);if(!s){console.error("Reference does not exist.",t);return}r.poll||(r.poll=z(s)),r.seen||(r.seen=[]);let c=r,l=[t,...i],p=this.get(l),f=(x,_=!1)=>!(x&&typeof x=="object")||!To&&x instanceof globalThis.Element?!1:_?!0:!Array.isArray(x),m={},h=!1;f(p,!0)&&(p.__esInspectable&&(p.__esInspectable.options.globalCallback=o),ee(p,(x,_,y)=>{if(!y.pass){let u=[...i,...y.path],g=this.listen(t,o,u,c);Object.assign(m,g)}},{condition:(x,_)=>f(_)}),h=!0);let d;try{if(d=this.getInfo(t,o,i,p),d&&!h)if(c.poll)h=this.poller.add(d);else{let x="setters";typeof p=="function"&&(x="functions"),h=this.add(x,d)}}catch(x){console.error("Fallback to polling:",n,x),h=this.poller.add(d)}if(h){if(m[k("absolute",d)]=d.sub,this.options.onInit instanceof Function){let x={};for(let _ in d.infoToOutput)x[_]=void 0;this.options.onInit(k("output",d),x)}return m}else{console.error("Failed to subscribe to:",n);return}};this.add=(t,o)=>Q[t]?Q[t](o,this.listeners,this.listeners.lookup):(this.listeners[t][k("absolute",o)][o.sub]=o,!0);this.remove=t=>{t||(t={...this.listeners.functions,...this.listeners.setters,...this.listeners.polling}),typeof t!="object"&&(t={sub:t});for(let o in t){let n=t[o],r=i=>{this.unsubscribe(i)===!1&&console.warn(`Subscription for ${o} does not exist.`,i)};typeof n!="symbol"?W(n,r):r(n)}return!0};this.unsubscribe=t=>{let o=this.listeners.lookup.symbol[t],n=o.name,r=this.poller.get(t),i=this.listeners.functions[n],s=i?.[t],c=this.listeners.setters[n],l=c?.[t];if(r)this.poller.remove(t);else if(s)delete i[t],Object.getOwnPropertySymbols(i).length||(Object.defineProperty(s.parent,s.last,{value:s.original,writable:!0}),delete this.listeners.functions[n]);else if(l){if(delete c[t],!Object.getOwnPropertySymbols(c).length){let f=l.parent;if(f){let m=l.last,h=f[m];Object.defineProperty(f,m,{value:h,writable:!0})}delete this.listeners.setters[n]}}else return!1;delete this.listeners.lookup.symbol[t];let p=this.listeners.lookup.name[o.name];delete p[o.id],Object.getOwnPropertyNames(p).length||delete this.listeners.lookup.name[o.name]};Object.defineProperty(this.listeners,"lookup",{value:St(),enumerable:!1,configurable:!1}),Object.assign(this.options,t),this.poller.setOptions(t.polling)}};var he=te;var Ie={},Pt=["Object","Array","Map","Set"];function A(e){var t=[];if(e)do{let o=e.constructor?.name,n=Pt.includes(o);Pt.includes(o)&&(Ie[o]||(Ie[o]=[...Object.getOwnPropertyNames(globalThis[o].prototype)])),Object.getOwnPropertyNames(e).forEach(function(r){n&&Ie[o].includes(r)||t.indexOf(r)===-1&&t.push(r)})}while(e=Object.getPrototypeOf(e));return t}var Le=(e,t={})=>{if(typeof e=="object")if(Array.isArray(e))e=[...e],t.accumulator=[];else{let o=A(e),n={};for(let r of o)n[r]=e[r];e=n,t.accumulator={}}return e},j=(e,t={})=>typeof e!="object"?e:(e=Le(e,t),ee(e,(o,n,r)=>r.simple&&r.object?Array.isArray(n)?[]:{}:n,t),t.accumulator);var Et=e=>typeof e=="object"&&typeof e.then=="function",w=(e,t)=>(typeof e=="object"&&Array.isArray(e)&&e.find(o=>Et(o))&&(e=Promise.all(e)),Et(e)?new Promise(o=>{e.then(async n=>{let r=t?t(n):n;o(r)})}):t?t(e):e),wt=[],N=(e,t,o=!1,n=!1,r=!1,i=[])=>{let s=o?e:Le(e);if(n&&([s,t]=[t,s]),t){let c=A(s),l=new Set(A(t));c.forEach(p=>{l.delete(p);let f=p in t,m=t[p];if(f&&m===void 0)delete s[p];else if(typeof m=="object"&&!Array.isArray(m))if(typeof s[p]=="object"){let h=s[p],v=i.indexOf(h);v!==-1?s[p]=i[v]:(i.push(h),s[p]=N(h,m,o,!1,r,i))}else s[p]=m;else if(typeof m=="function"){let h=s[p],v=typeof h=="function",d=m,x=d.__compose===!0;if(!v||!r&&!x)s[p]=d;else{let _=wt.find(u=>u.f===h),y=h;if(_||(y.__esInspectable&&(y=y.__esInspectable.target),_={f:y,list:[y]},wt.push(_)),_.list.includes(d))console.warn("This function was already composed. Ignoring duplicate.");else{let u=s[p]=function(...g){let b=y.call(this,...g);return d.call(this,...Array.isArray(b)?b:[b])};_.f=u,_.list.push(d)}}}else p in t&&(s[p]=m)}),l.forEach(p=>{let f=t[p];f!==void 0&&(s[p]=f)})}return s};function G(e){return Ao(e)==="class"}function Ao(e){return typeof e=="function"?e.prototype?Object.getOwnPropertyDescriptor(e,"prototype").writable?"function":"class":e.constructor.name==="AsyncFunction"?"async":"arrow":""}var oe=Symbol("return");var Io=e=>typeof e=="function"&&e.hasOwnProperty("prototype")&&!e.hasOwnProperty("arguments");function Fe(e,t={},o={}){if(T||e instanceof globalThis.NodeList&&(e=Array.from(e)),typeof e=="string")e={[a.apply]:e};else if(typeof e=="function")Io(e)?e=new e(t,o):(delete e.__,e={[a.default]:e});else if(!T&&e instanceof globalThis.Element){let n=e[a.component];if(n){t=j(t);let r=t.__compose,i=t.__apply;delete t.__compose,delete t.__apply,r&&(console.warn("Cannot compose a component onto an element that already has a component. Merging with the base object instead..."),t=Object.assign(r,t)),i&&(console.warn("Cannot apply a component onto an element that already has a component. Applying to the base object instead..."),t=Object.assign(t,i));let s=N(n,t,!0);return{[oe]:s}}else e={[a.element]:e}}else{if(Array.isArray(e))return e;if(typeof e=="object")e=o.clone!==!1?j(e):e;else throw new Error(`Invalid configuration type: ${typeof e}. Expected object or string.`)}return e}var Lo=(e,t,o=[],n)=>e.reduce((r,i)=>w(r,s=>{let l=(typeof i=="function"?i:i.default)(s,...o);return n&&n(l)?s:l}),t),ne=(e,t,o)=>{let{main:n,options:r}=t,i;if(!Array.isArray(e)){if(!e[o])return n;let l=e;switch(e=l[o]??[],o){case"load":i=[...l.load??[]];break;case"start":i=[...l.load??[],...l.activate??[]];case"stop":i=[...l.load??[],...l.activate??[],...l.start??[]];break}}let c=Fo(n,e,i);return c?Lo(c,n,[r],l=>!l||typeof l!="object"):n},Ot=e=>{let t={};return e.forEach(o=>{let n=typeof o=="function"?"load":o.behavior??"load";(t[n]=t[n]??[]).push(o)}),t},Fo=(e,t,o=[])=>{let n=A(e).filter(c=>c.slice(0,2)==="__"),i=[...Object.values(Ee),...o.map(c=>typeof c=="function"?[]:c.properties.dependents).flat()];return t.filter(c=>{if(c&&typeof c=="object"){let l=c.name,{dependencies:p,dependents:f=[]}=c.properties,m=c.required||!p;if(!m&&p){let h=l?` (${l})`:"";if(f.find(d=>n.includes(d))){let d={};p.forEach(_=>d[_]=i.includes(_));let x=p.filter(_=>!i.includes(_));x.length&&console.warn(`The loader${h} for ${p.join(", ")} might be loaded too early, since we are missing the following dependencies: ${x.join(", ")}`),m=!0}}return m&&f&&i.push(...f),m}})},Ct=(e=[],t)=>{if(!e||e.length===0)return t;if(!t||t.length===0)return e;let o=[];return[...e,...t].filter(r=>{if(typeof r=="function")return!0;{let i=r.name;return i?o.includes(i)?!1:(o.push(i),!0):!0}},void 0)};var Me={};C(Me,{default:()=>Ko,name:()=>Mo,properties:()=>No});var Mo="props",No={dependents:[a.properties]},kt=(e,t,o,n=t)=>{o||(o=A(t)),o.forEach(r=>{if(!(r in e)){let i={get:()=>n[r],set:s=>{n[r]=s},enumerable:!0,configurable:!1};n!==t&&Object.defineProperty(n,r,i),Object.defineProperty(e,r,i)}})},Ro=e=>{let t=e[a.root],o=e[a.properties];t.props={original:[]};let n;return Object.defineProperty(e,a.properties,{get:()=>n,set:r=>{if(typeof r!="object"&&!G(r))console.warn("Props must be an object");else{let i=A(r);if(!n)n=r,t.props.original=i;else{let s=n;n={},kt(n,s,t.props.original)}kt(e,r,i,n)}},enumerable:!1,configurable:!1}),o&&(e[a.properties]=o),e},Ko=Ro;var Re={};C(Re,{default:()=>Go,name:()=>zo,properties:()=>Bo,required:()=>Wo});var Jr={dependencies:[a.root,a.parent],dependents:[]},Vr=globalThis.Element,$o=e=>{let t=e[a.root],o=e[a.parent],n=t.name;o=(!T&&o instanceof globalThis.Element?o?.[a.component]:o)??e[a.parent];let r={value:"",writable:!0};if(o&&o[a.root]&&typeof n=="string"){let s=o,c=[];for(;s&&s[a.root];){let l=s[a.root].name;if(typeof l=="string")c.push(l);else{typeof l=="symbol"?t.root=l:console.error("No graph reset occured for",l);break}s=s[a.parent]}r.value=[...c.reverse(),n],r.value=r.value.join(E)}Object.defineProperty(t,"path",r)},Ne=$o;var zo="parent",Wo=!0,Bo={dependencies:[a.root],dependents:[]},Do=(e,t)=>{let o=e[a.root];o.parent={callbacks:[],add:function(i){this.callbacks.push(i)},get:()=>r,start:(i=!1)=>{if(i||r[a.root]?.start?.value===!0){let s=o.connected,c=s instanceof Function;e[a.root].start.run(),c&&s()}}};let r=e[a.parent];Object.defineProperty(e,a.parent,{get:()=>o.parent.get(),set:i=>{let s=r&&!i;if(r?.[a.root]){let l=o.name;delete r[l],r.__.components.delete(l)}if(r=i,r?.[a.root]){let l=o.name;r[l]&&console.error("OVERWRITING EXISTING PROPERTY ON PARENT!"),r[l]=e,r.__.components.set(l,e)}o.parent.callbacks.forEach(l=>l.call(e,i)),Ne(e),s?e[a.root].stop.run():r&&o.parent.start()}}),Ne(e)},Go=Do;var Ke=e=>e.includes(a.root)||e==="default";function $e(e){if(!e||typeof e!="object")return null;let t=Object.entries(e).map(([n,r])=>{if(!(r&&typeof r=="object"||typeof r=="function"))return;if(n.includes(a.root)?!1:Object.keys(r).find(Ke))return n==="constructor"&&G(r)?void 0:{ref:r,parent:e,name:n}}).filter(n=>n&&n.ref);return t.length>0?t:null}var re=class{constructor(t,o,n){this.loaders={available:[]};this.components=new Map;this.connected=!1;this.resolved=!1;this.create=function(t){return jt(t,void 0,this.loaders.available)};this.stop={name:"stop",value:!1,add:Tt,run:()=>At.call(this.stop,this.loaded.value),callbacks:{before:[],main:[],after:[]}};this.start={name:"start",value:!1,add:Tt,run:()=>At.call(this.start,this.loaded.value),callbacks:{before:[],main:[],after:[]}};this.loaded={value:!1,callbacks:[],add:function(t){return this.callbacks.push(t),!0},run:function(t){t&&(this.value=t),ze(this.callbacks,[this.value])}};let{parent:r,original:i,name:s=Symbol("root"),loaders:c}=o,l=r?.[a.root].path,f=(l?[l,s]:typeof s=="string"?[s]:[]).join(E),m=t[a.root],h=typeof m=="symbol",v=typeof s=="symbol",d=h?m:v?s:Symbol("root");this.name=v&&h?m:s,this.symbol=d,this.root=v?s:r[a.root].root,this.path=f,this.options=n,this.original=i,this.states={},this.loaders.available=c,this.loaded.add(Ho),Object.defineProperty(t,a.root,{value:this,enumerable:!1,configurable:!1,writable:!1})}};function Ho(e){let t=e[a.root],o=$e(e),n=o?o.map(s=>{let c=Object.assign({},t.options),l=c.name=s.name;delete c.overrides,c.parentObject=s.parent,c.parent=e;let p=s.ref;if(p)if(p.__?.symbol){console.error("Has an existing component",p.__.path);let f=p.__.parent;f&&console.error(`Changing parent of existing component (${p.__.path}) from ${f.__.path} to ${t.path}`),p.__.name=l,p.__parent=e}else{let f=U(p,t.loaders.available,c);Object.defineProperty(s.parent[l],a.promise,{value:f,writable:!1});let m=L(f,h=>(t.components.set(l,h),h));t.components.set(l,m)}else delete s.parent[l],console.error("No reference found for nested component",s)}):[],r,i=new Promise(s=>r=async()=>{t.resolved=!0,s(!0)});Object.defineProperty(e,`${a.resolved}`,{value:i}),t.resolved=!1,L(n,()=>qo(e,r))}function qo(e,t){let o=e[a.root];for(let i in e){let s=e[i];if(typeof s=="function"&&!G(s)){let c=e[a.proxy]??e;e[i]=s.bind(c)}}o.stop.initial=e[a.stop],e[a.stop]=o.stop.run;let n=A(e);for(let i of n)if(Ke(i)){let s=Object.getOwnPropertyDescriptor(e,i);s?.enumerable&&Object.defineProperty(e,i,{...s,enumerable:!1})}let r=e[a.parent];e[a.parent]=r,t()}var Jo=(e,t,o,n)=>L(n,()=>e.call(t,...o)),ze=(e,t=[],o)=>{if(e.length)return e.reduce((n,r)=>Jo(r,o,t),void 0)};function Tt(e,t="main"){let{callbacks:o}=this;return o[t].push(e),!0}function At(e){let{callbacks:t,name:o}=this;if(!this.value){let n=o==="stop",r=e[a.root],i=n?r.stop.initial:e[a[o]];this.value=!0,n||(r.stop.value=!1);let s=i&&!n?[...t.before,i,...t.main]:[...t.before,...t.main],c=ze(s,[e],e);return L(c,()=>{let l=Array.from(e[a.root].components.entries()),p=L(l.map(async([f,m])=>{let h=m[a.promise];return h&&typeof h.then=="function"&&(m=l[f]=await h),await m[a.root][o].run()}));return L(p,()=>{let f=ze(t.after,[e],e);return L(f,()=>{if(n){i&&i.call(e,e),e[a.listeners.value].clear();let m=e[a.root].path,h=e,v=h[a.parent];for(;v&&v[a.root]!==void 0;){let d=h[a.parent];if(d)h=d,h&&h[a.root]&&h[a.listeners.value].clear(m);else break}r.start.value=!1}return!0})})})}}function U(e,t=[],o){let n=performance.now(),r=o.parent,{parentObject:i,overrides:s={},opts:c={},name:l}=o,p=e;if(e=Fe(e,s,c),e[oe])return e[oe];if(Array.isArray(e))return w(e.map(y=>U(y,t,o)));let f={name:l,parent:r,original:p,loaders:t},m=new re(e,f,c);e=N(e,s);let h=Ot(t),v=ne(h,{main:e,overrides:s,options:c},"init"),d=w(v,y=>{!y[a.parent]&&r&&(y[a.parent]=r);let u=ne([Re],{main:y,options:c}),g=ne([Me],{main:u}),b=ne(h,{main:g,options:c},"load");return w(b,S=>(i&&(i[l]=S),m.loaded.run(S),S))}),_=performance.now()-n;return w(d,y=>{if(!Array.isArray(y)){let g=performance.now()-n;w(y.__resolved,()=>{let S=performance.now()-n;globalThis.escomposePerformance.resolve.push(g),globalThis.escomposePerformance.resolveAll.push(S),globalThis.escomposePerformance.create.push(_)})}}),d}globalThis.escomposePerformance={create:[],resolve:[],resolveAll:[],listeners:{create:[],resolve:[]},averages:function(){let e={create:0,resolve:0,resolveAll:0,listeners:{create:0,resolve:0}};for(let t in e)if(typeof this[t]=="object"&&!Array.isArray(this[t]))for(let o in this[t])e[t][o]=this[t][o].reduce((n,r)=>n+r,0)/this[t][o].length;else e[t]=this[t].reduce((o,n)=>o+n,0)/this[t].length;return e}};var De={};C(De,{default:()=>nn,name:()=>Qo,properties:()=>tn,required:()=>en});var It=a.default,Lt=a.operator,Ft=Symbol("listenerObject"),Mt=Symbol("toSet"),se=Symbol("subscriptionKey"),Nt=Symbol("configKey"),We=Symbol("toResolveWithKey"),Vo=e=>a.listeners.format in e||a.listeners.branch in e||a.listeners.trigger in e||a.listeners.bind in e,Rt="INITIALIZED",Kt="REGISTERED",Yo={},Xo={},Zo={},Be=class{constructor(t,o,n){this.original={};this.active={};this.globals={};this.context={options:{}};this.rootPath="";this.status="";this.#e=[];this.#t=[];this.setInitialProperties=(t={},o,n={})=>{Object.assign(this.context,n),o&&(this.rootPath=o),this.original=t,[{name:"active",ref:Zo},{name:"from",ref:Yo},{name:"to",ref:Xo}].forEach(i=>{i.ref[this.context.id]||(i.ref[this.context.id]={}),this.globals[i.name]=i.ref[this.context.id]}),this.#n=this.getManager(),this.runEachListener(t,this.addToGlobalLog)};this.getManager=(t="from")=>{let o=t==="to"?this.globals.to:this.globals.from;return this.rootPath.split(E).forEach(n=>{o[n]||(o[n]={}),o=o[n]}),o[We]??this};this.onStart=t=>{let o=this.#n;o===this?this.status===Rt?t():this.#t.push(t):o.onStart(t)};this.runEachListener=(t,o)=>{if(!!o)for(let n in t){let r=t[n];if(!r){console.warn("Skipping empty listener:",n);continue}if(r&&typeof r=="object"){let i=r,s=n;for(let c in i)o(c,s,i[c])}else{let i=n,s=r,c=typeof s;c==="function"?o(i,"",s):c==="string"?o(i,s,s):console.error("Improperly Formatted Listener",s)}}};this.register=(t=this.original)=>{this.runEachListener(t,this.add),this.status=Kt};this.#s=t=>{let o=this.context.monitor.get(t.path,"info");if(typeof o.value=="function"){let n=Array.isArray(t.args)?t.args:[t.args];o.value(...n)}else console.error("Cannot yet trigger values...",t)};this.initialize=t=>{this.status?this.status===Kt?(this.status=Rt,this.#e.forEach(this.#s),this.#t.forEach(o=>o()),this.#t=[],this.#e=[]):this.#s(t):this.#e.push(t)};this.start=()=>{this.register(),this.initialize()};this.#r=t=>!t||!this.rootPath||this.rootPath===t.slice(0,this.rootPath.length)&&t[this.rootPath.length]===E?t:[this.rootPath,t].join(E);this.#o=t=>{let o={absolute:{},relative:{}};t=this.#r(t);let n=this.rootPath?t.replace(`${this.rootPath}.`,""):t,r=t.split(E);o.absolute.array=[this.context.id,...r],o.relative.array=n.split(E);let i=this.context.monitor.get(o.absolute.array,void 0);if(this.context.graph){if(i&&this.context.bound)o.absolute.array=[this.context.id,this.context.bound,...o.absolute.array.slice(1)],o.relative.array.unshift(this.context.bound);else if(!i){let f=o.relative.array.join(E);i=this.context.graph.get(f)}}let s=i&&typeof i=="object"&&a.root in i,c=i&&s&&i[Lt],l=i&&i[It],p=c?Lt:l?It:void 0;return p&&(o.absolute.array.push(p),o.relative.array.push(p)),o.absolute.value=o.absolute.array.slice(1).join(E),o.relative.value=o.relative.array.join(E),o};this.add=(t,o,n=!0,r)=>{let i=performance.now();if(!n)return;let s=this.#o(t),c=this.#o(o),l=s.absolute.value;r||(r=this.globals.active[l]?.[se]),r||(r=this.context.monitor.on(s.absolute.array,(v,d,x)=>this.activate(v,x),{ref:this.context.instance,path:s.relative.array})),typeof n=="string"&&(n=c.absolute.array.slice(1).join(E));let p={value:n,[Ft]:!0};[this.active,this.globals.active].forEach(v=>{v[l]||(v[l]={});let d=v[l];d[se]||Object.defineProperty(d,se,{value:r,configurable:!0}),d[c.absolute.value]=p});let m=n[a.listeners.trigger];m&&this.#n.initialize({path:s.absolute.array,args:m}),this.addToGlobalLog(l);let h=performance.now();return globalThis.escomposePerformance.listeners.create.push(h-i),p};this.addToGlobalLog=(t,o="from")=>{let n=this.#r(t),r=o==="to"?this.globals.to:this.globals.from;n.split(E).forEach(s=>{r[s]||(r[s]={}),r=r[s],r[We]||(r[We]=this)})};this.remove=(t,o)=>{let n=this.#o(t),r=this.#o(o),i=[n.absolute.value,r.absolute.value];[{ref:this.active,path:i},{ref:this.globals.active,path:i,unlisten:!0}].forEach(c=>{let{ref:l,path:p,unlisten:f}=c,m=l[p[0]];if(typeof m=="object"){if(delete m[p[1]],Object.keys(m).length===0){delete l[p[0]];let h=m[se];f&&h&&this.context.monitor.remove(h),delete m[se]}}else delete l[p[0]]})};this.clear=t=>{let o=this.#r(t);Object.keys(this.active).forEach(n=>{Object.keys(this.active[n]).forEach(r=>{(!o||n.slice(0,o.length)===o||r.slice(0,o.length)===o)&&this.remove(n,r)})})};this.has=(t,o=this.active)=>!!o[t];this.get=(t,o=this.active)=>o[t];this.activate=(t,o)=>{this.context.options.listen?.(t,o),[{info:this.get(t,this.globals.active),name:t}].forEach(r=>{let i=r.info;if(i)if(i[Ft]){let s=performance.now();this.pass(t,{value:i.value,parent:this.active,key:r.name,subscription:i.subscription,__value:!0},o);let c=performance.now();globalThis.escomposePerformance.listeners.resolve.push(c-s)}else if(typeof i=="object"){let s=performance.now();for(let c in i){this.pass(t,{parent:i,key:c,subscription:i[c].subscription,value:i[c].value},o);let l=performance.now();globalThis.escomposePerformance.listeners.resolve.push(l-s)}}else console.error("Improperly Formatted Listener",i)})};this.pass=(t,o,n)=>{let r=this.context.id,i=o?.__value,s=o.parent,c=o.key,l=o.parent[c];o=l.value;let p=l?.[Nt],f=o,m=typeof o,h=(_,y)=>{let u=this.context.monitor.get(_,"info");if(u.exists){let g=u.value,P={value:typeof g!="function"&&!g?.default?Mt:g,bound:u.parent};return y&&(o=P.value,s[c]=P),P}else return{value:void 0}},v=_=>{let y=[r];return y.push(...c.split(E)),h(y,_)},d=_=>{let y=[r],u=[];return this.rootPath&&u.push(...this.rootPath.split(E)),u.push(..._.split(E)),y.push(...u),y};if(typeof o=="boolean")i?console.error(`Cannot use a boolean for ${a.listeners.value}...`):v(!0);else if(m==="string"){let _=d(f);h(_,!0),i&&(s[c]={[f]:s[c]},c=f)}else o&&m==="object"&&Vo(f)&&("value"in f?i?o=s[c]=f.value:o=s[c].value=f.value:v(!0),f&&f&&(p=f),Object.defineProperty(s[c],Nt,{value:p}));let x=!0;if(p){let _=a.listeners.value;if(_ in p){let y=d(p[_].original??p[_]);if(typeof p[_]=="string"){let u=this.context.monitor.get(y);u?p[_]={value:u,original:p[_]}:o=`because ${y.slice(1).join(E)} does not point correctly to an existing component.`}else p[_].value.__parent||(o=`because ${p[_].original??r.toString()} has become unparented.`)}else{let y=a.listeners.branch,u=a.listeners.format;if(y in p&&(p[y].find(b=>{let S=[];"if"in b&&S.push(b.if(n)),"is"in b&&S.push(b.is===n);let P=S.length>0&&S.reduce((O,K)=>O&&K,!0);return P&&"value"in b&&(n=b.value),P})||(x=!1)),u in p)try{n=p[u](n),n===void 0&&(x=!1)}catch(g){console.error("Failed to format arguments",g)}}}if(x&&n!==void 0){let _=Array.isArray(n)?n:[n];if(o===Mt){let y=[r];y.push(...c.split(E));let u=y.pop(),g=this.context.monitor.get(y,"info");g.value?g.value[u]=n:console.error(`Cannot set value on ${y.filter(b=>typeof b!="symbol").join(E)} from ${t}`)}else if(o?.default)o.default.call(o,..._);else if(typeof o=="function"){let y=p?.[a.listeners.bind]?.value??l.bound??this.context.instance;y?o.call(y,..._):o(..._)}else{let y=c?`listener: ${t} \u2014> ${c}`:`listener from ${t}`;s?(console.warn(`Deleting ${y}`,o),delete s[c]):console.error(`Failed to add ${y}`,o)}}};(t||o||n)&&this.setInitialProperties(t,o,n)}#e;#t;#n;#s;#r;#o},$t=Be;var Qo="listeners",en=!0,tn={dependents:[a.listeners.value]},zt=new he,on=(e,t)=>{let o=e[a.root],n=new $t,r=e[a.listeners.value];return n.setInitialProperties(r,o.path,{id:o.root,monitor:zt,options:t}),zt.set(o.symbol,e),Object.defineProperty(e,a.listeners.value,{value:n,enumerable:!1,configurable:!1,writable:!1}),o.start.add(()=>{n.start()}),e},nn=on;var Ue={};C(Ue,{default:()=>ln,name:()=>rn,properties:()=>sn});var rn="trigger",Ge=a.trigger,sn={dependents:[Ge],dependencies:[a.listeners.value]},an=e=>{console.log("triggerLoader",e);let t=e[a.root],o=e[Ge];return Object.defineProperty(e,Ge,{value:o,enumerable:!1,configurable:!1,writable:!1}),Array.isArray(o)||(o=[o]),e[a.listeners.value].onStart(()=>e.default(...o)),e},ln=an;var cn=new he,He=(e,t={},o={})=>{let n=j(o);n.loaders=Ct(n.loaders,[De,Ue]);let r=n,i=U(e,r.loaders,{overrides:t,opts:r,waitForChildren:!1});return w(i,s=>{let c=Array.isArray(s),l=c?s:[s];return l.map(p=>{if(p[a.parent]||p.__.path===""){let f=p[a.root];if(f.start.value===!1){let h=f.start.run();return w(h,L)}}else return p}),c?l:l[0]})},jt=He;var L=w,Wt=j;var qe={};C(qe,{behavior:()=>hn,default:()=>_n,name:()=>dn,properties:()=>yn});var fn=async(e,t)=>{let o=await fetch(e).then(n=>n.arrayBuffer());return WebAssembly.instantiate(o,t)},un=async(e,t)=>(t||(t={env:{abort:()=>console.log("Abort!")}}),WebAssembly.instantiateStreaming?await WebAssembly.instantiateStreaming(fetch(e),t):await fn(e,t)),Bt=un;var Dt=(e,t)=>e[a.reference]?(console.warn("[escode]: Falling back to ES Component reference...",t),e[a.reference]):mn(t.message),Gt=`Cannot transform ${a.compose} string without a compose utility function`;function ye(e,t){let o=typeof e=="string"?e:e[a.uri];if(o&&o.slice(-5)===".wasm"){let n=e.relativeTo??t?.relativeTo??window.location.href;n.slice(-1)[0]!=="/"&&(n+="/");let r=new URL(o,n).href;return new Promise(async i=>{let s=await Bt(r,e.importOptions),c=Object.assign({},s.instance.exports);for(let l in c){let p=c[l];p instanceof WebAssembly.Memory?c[l]=new Uint8Array(p.buffer):p instanceof WebAssembly.Global&&Object.defineProperty(c,l,{get:()=>p.value,set:f=>p.value=f})}i(c)})}else if(o&&t.utilities){let n=t.utilities.bundle,r=n&&typeof n.function=="function",i=t.utilities.compile,s=i&&typeof i.function=="function";if(!r&&!s)e=Dt(e,new Error(Gt));else return new Promise(async c=>{try{if(r){let l=n.options??{};l.bundler||(l.bundler="datauri"),l.bundle||(l.collection="global"),l.relativeTo||(l.relativeTo=t.relativeTo??".");let p=n.function(o,l);await p.compile(),e=Object.assign({},p.result)}else if(s){let l=i.options??{};l.relativeTo||(l.relativeTo=t.relativeTo??"."),e=await i.function(e,l)}else throw new Error(Gt)}catch(l){e=Dt(e,l)}c(j(e))})}return j(e[a.reference]??e)}function mn(e){return{[a.element]:"p",b:{[a.element]:"b",[a.attributes]:{innerText:"Error: "}},span:{[a.element]:"span",[a.attributes]:{innerText:e}}}}var dn="compose",H={compose:a.compose,apply:a.apply,bundle:D},hn="init",yn={dependents:Object.values(H)},bn=e=>typeof e=="string"&&(e.includes("/")||e.includes("."));function gn(e,t,o=!1){return e=Ut(e,e[H.compose],t,!0,o),w(e,n=>{let r=n[H.apply];return n=r&&(typeof r=="object"||bn(r))?Ut(n,r,t,!1,o):n,w(n)})}var _n=gn;function Ut(e,t={},o={},n=!1,r=!1){Array.isArray(t)||(t=[t]);let i=w(t.map(s=>{let c=ye(s,o),l=(p,f=[],m=!0)=>{if(Array.isArray(p))p.forEach(h=>l(h,f),!0);else if(p[H.compose]){f.push(p);let h=p[H.compose];delete p[H.compose];let v=w(ye(h,o));l(v,f)}else m&&f.push(p);return f};return w(c,p=>l(p))}));return w(i,s=>{let c=s.flat(),l={};return c.forEach(p=>l=N(l,p,!1,!1)),N(e,l,r,n)})}var Qe={};C(Qe,{default:()=>Yt,name:()=>Cn,properties:()=>An,required:()=>kn});var Ve={dependents:[a.webcomponents],dependencies:[a.element,a.component,a.parent]},Ht=e=>{let t=e[a.webcomponents]??{};for(let o in t){let n=t[o],r=n[a.element];r.name&&r.extends&&Ye(r,e,n)}return e},be={};if(!T){let e=document.createElement;document.createElement=function(t,o){let n=be[t];return n&&!n.autonomous?e.call(this,n.tag,{is:t}):e.call(this,t,o)}}var xn={li:"LI",ol:"OL",ul:"UL",br:"BR",p:"Paragraph",textarea:"TextArea",a:"Anchor"},Je=!1,Ye=(e,t,o=t)=>{if(be[e.name])console.log("Already created component...");else{let n=j(o),r=Je?"":xn[e.extends]??e.extends[0].toUpperCase()+e.extends.slice(1),i=new Function(`

        class ESComponentBase extends HTML${r}Element { 
            #properties;
            constructor(properties={}){
                super()
               this.#properties = properties
            }
        }
        return ESComponentBase;

        `)();class s extends i{constructor(f){super(f);n[a.element]=this,t[a.root].create(n)}connectedCallback(){let f=this[a.component],m=f[a.parent];f[a.parent]=m}disconnectedCallback(){console.log("Custom element removed from page.")}adoptedCallback(){console.log("Custom element moved to new page.")}attributeChangedCallback(f,m,h){console.log("Custom element attributes changed.",f,m,h)}}be[e.name]={class:s,autonomous:Je,tag:e.extends};let c=be[e.name].class;Je?customElements.define(e.name,c):customElements.define(e.name,c,{extends:e.extends})}};var vn=(e="svg",t)=>q.createElementNS("http://www.w3.org/2000/svg",e,t);function Sn(e){return e?Array.isArray(e)?!e.reduce((o,n)=>o*(ge(n)?0:1),!0):ge(e):!1}function ge(e){if(e.__element||Sn(e.__compose))return!0;if(e.__)return Pn(e.__.components)}function Pn(e){return Array.from(e.values()).find(t=>{if(ge(t))return!0})}var Jt=(e,t)=>e[0]==="svg"||t&&t.__element instanceof SVGElement?vn(...e):q.createElement(...e);var Xe={dependents:[a.element,a.attributes,a.resize,a.childPosition,a.editor,a.component,a.attribute,a.connected],dependencies:[a.parent,a.root,a.proxy]},q=globalThis.document,En=globalThis.addEventListener,wn=globalThis.removeEventListener;function Ze(e,t={}){let o=e[a.root],n=o.states,r=o.name,i=e[a.parent],s=e[a.element],c=e[a.attributes]??{},l;if(!(s instanceof globalThis.Element)){let g=c&&Object.keys(c).length||ge(e)?"div":"span";if(s&&typeof s=="object"&&s.name&&s.extends){let P=s,O=e[a.element];Ye(O,e),e[a.element]=s=P.name}s===void 0?s=g:Array.isArray(s)?s=Jt(s,i):typeof s=="object"&&(l=s,l.selectors?s=q.querySelector(l.selectors):l.id?s=q.getElementById(l.id):s=g),typeof s=="string"&&(s=Jt([s],i));let S=Symbol("no input to the default function");e.hasOwnProperty("default")||(e.default=function(P=S){return P!==S&&(this[a.element].innerText=P),this[a.element]})}if(!(s instanceof globalThis.Element))throw new Error("Element not created for "+r);let p=n||{};p.element=s,p.attributes=c,i instanceof globalThis.Element?p.parentNode=i:p.parentNode=i?.[a.element]instanceof globalThis.Element?i[a.element]:s.parentNode,p.onresize=e[a.resize],p.onresizeEventCallback=void 0;let f=p;typeof r!="string"&&(r=`${s.tagName??"element"}${Math.floor(Math.random()*1e15)}`),s.id||(s.id=r);let m;Object.defineProperty(e,`${a.connected}`,{value:new Promise(u=>m=async()=>{o.connected=!0,u(!0)})}),o.connected=m;let h=(u,g)=>u.slice(0,2)==="on"&&typeof g=="function",v=(u,g,b)=>!h(u,g)&&typeof g=="function"?g.call(b):g,d=u=>{if(e[a.element]instanceof globalThis.Element)for(let g in u)if(g==="style")for(let b in u.style)e[a.element].style[b]=v(g,u.style[b],e);else{let b=u[g];if(h(g,b)){let S=b;e[a.element][g]=(...P)=>{let O=e[a.proxy]??e;return S.call(O??e,...P)}}else{let S=v(g,b,e);e[a.element].setAttribute(g,S);try{e[a.element][g]=S}catch{}}}};Object.defineProperty(e,a.attributes,{get:()=>f.attributes,set:u=>{f.attributes=u,f.attributes&&d(f.attributes)}}),Object.defineProperty(e,a.element,{get:function(){if(f.element instanceof globalThis.Element)return f.element},set:function(u){if(u instanceof globalThis.HTMLElement){f.element!==u&&(f.element.insertAdjacentElement("afterend",u),f.element.remove()),f.element=u;let g=e[a.root];if(g){let b=g.components;for(let S in b){let P=b[S];P&&P[a.root]&&w(P,O=>O[a.parent]=u)}}d(f.attributes)}}});let x=o.parent.get;o.parent.get=()=>{let u=x(),g=e[a.element].parentNode;return g?g.hasAttribute(a.attribute)?g[a.component]:{[a.element]:g}:u},o.parent.add(function(u){if(typeof u=="string"){let b=q.querySelector(u);b?u=b:u=q.getElementById(u)}u?.[a.element]instanceof globalThis.Element&&(u=u[a.element]);let g=this[a.element].parentNode;if(g!==u)if(this[a.element]instanceof globalThis.Element){if(g&&this[a.element].remove(),u instanceof globalThis.Element){let b=this[a.childPosition],S=this[a.element],P=o.editor;if(P&&(S=P),!u.children.length||typeof b!="number")u.appendChild(S);else{let K=[...u.children].slice(0,b),$,rt;for(;K.length;){$=K.pop();let st=$[a.component][a.childPosition];if(typeof st=="number"){let to=st>b?"beforebegin":"afterend";$.insertAdjacentElement(to,S),rt=!0;break}}rt||u.insertAdjacentElement("afterbegin",S)}P&&P.setComponent(this)}}else console.error("No element was created for this Component...",this)});let _=e[a.resize];Object.defineProperty(e,a.resize,{get:function(){return _},set:function(u){f.onresize=u,f.onresizeEventCallback&&wn("resize",f.onresizeEventCallback),f.onresize&&(f.onresizeEventCallback=g=>{if(f.onresize&&e[a.element]instanceof globalThis.Element){let b=e[a.proxy]??e;return u.call(b,g)}},En("resize",f.onresizeEventCallback))}});let y=t?.utilities;if(y&&e[a.editor]){let u=e[a.editor],g=y.code?.class;if(g||(typeof u=="function"?g=u:console.error("Editor class not provided in options.utilities.code")),g){let b=y.code?.options??{};b=typeof u=="boolean"?b:{...b,...u};let S=b.bind,P=new g(b);if(P.start(),o.editor=P,S!==void 0){let O=e,K=e[a.root];S.split("/").forEach($=>{if($==="..")O=O[a.root].states.parentNode[a.component];else{if($===".")return;O=O[$]}}),K.boundEditors?K.boundEditors.push(P):K.boundEditors=[P]}}}return e[a.element][a.component]=e,e[a.element].setAttribute(a.attribute,""),e[a.element]=e[a.element],o.start.add(()=>{e[a.resize]=f.onresize},"before"),o.stop.add(()=>{e[a.element].remove();let u=`${a.editor}Attached`;e[u]&&e[u].remove()}),e}var Cn="dom",kn=!0,Tn=new Set([...Xe.dependents,...Ve.dependents]),Vt=new Set([...Xe.dependencies,...Ve.dependencies]);Vt.delete(a.element);var An={dependents:Array.from(Tn),dependencies:Array.from(Vt)};function Yt(e,t={}){let o=Ze(e,t);return Ht(o)}var et={};C(et,{default:()=>Fn,name:()=>jn,properties:()=>Ln,required:()=>In});var jn="start",In=!0,Ln={dependents:[a.source],dependencies:[D,a.root,a.editor,a.parent,a.proxy,a.connected,a.promise,a.resolved]},Fn=e=>{e[a.root].start.add(()=>Nn(e))},Mn=(e,t)=>e[a.root].start.value=t;function Nn(e,t=[],o){Rn.call(e,o);let n=Kn.call(e,t);return Mn(e,!0),n}async function Rn(e){let t=this[a.root];await this[a.connected],t.connected=!0;let o=t.boundEditors;return o&&o.forEach(n=>n.setComponent(this)),e&&await e(),this}function Kn(e=[]){let t=this[a.root],n=this[a.parent]?.[a.root]?.editor;n&&(t.editor=n);let r=this[D];if(r){typeof r=="function"&&(r=this[a.source]=r()),delete this[D];let i=this[a.root].path;t.editor&&t.editor.addFile(i,r)}return e.forEach(i=>i.call(this)),this}var ot={};C(ot,{default:()=>Xt,name:()=>$n,properties:()=>zn});var R={},$n="animation",tt=a.animate,zn={dependents:[a.animate]};function Xt(e){if(e[tt]){let t=e[tt],o=Math.random(),n=typeof t=="number"?t:T?60:"global",r;if(R[n])r=()=>{e.default(),R[n].objects[o]=e};else{let i=R[n]={objects:{[o]:e}},s=i.objects,c=()=>{for(let l in s)s[l].default()};if(n==="global"){let l=()=>{c(),i.id=globalThis.requestAnimationFrame(l)};r=l,R[n].stop=()=>{globalThis.cancelAnimationFrame(i.id),i.cancel=!0}}else r=()=>{c(),i.id=setInterval(()=>c(),1e3/n)},R[n].stop=()=>clearInterval(i.id)}e[a.root].start.add(r),e[a.root].stop.add(()=>{delete R[n].objects[o],e[tt]=t,Object.keys(R[n].objects).length===0&&(R[n].stop(),delete R[n])})}}var J=[];J.push(qe);T||J.push(Qe);J.push(et);J.push(ot);var Zt=Wt;var Qt=(e,t,o={})=>(o.loaders?o.loaders=Array.from(new Set([...o.loaders,...J])):o.loaders=J,He(e,t,o));var Bn=e=>{let t=document.getElementById(e);t?t.scrollIntoView({}):console.error(`No component found for path: ${e}`)},Dn=!1,nt=class{constructor(t){this.paths={};this.set=(t,o)=>{o===void 0?delete this.paths[t]:this.paths[t]=o};this.setRoot=t=>this.set("",t);this.get=(t=this.getPath())=>{let o=this.paths;return t.split(/\.|\//).forEach(n=>o=o[n]??o[""][n]),o};this.load=(t,o,n=!0)=>{let r=t===void 0?this.getPath():t,i=this.get(r);i&&o&&o.preventDefault();let s=!i&&(!this.loaded||this.loaded.path!=="")&&n;if(s&&(r="",i=this.get("")),i){let c=this.options.element.root,l=r?this.options.element.target:void 0;if(l){(!this.loaded||this.loaded.path!==""&&r!=="")&&this.load(""),typeof l=="string"?c=document.querySelector(l):c=l;let m=[...c.children];if(c)for(let h of m)h.remove()}else this.loaded&&this.loaded.ref.__element.remove();let p=Zt(i),f=Qt(p,{__parent:c});return r===""&&(this.root&&this.root.__element.remove(),this.root=f),this.loaded={path:r,ref:f},l&&window.scrollTo(0,0),this.loaded}else Bn(r);s&&this.navigate(void 0,void 0,!1)};this.navigate=(t=this.getPath(),o,n=!1)=>{let r=t.split(/\.|\//).join(this.options.spa?"/":".");history.pushState({},"escodeRouterURL",this.options.spa?`${window.location.origin}/${r}`:`${window.location.origin}#${r}`),this.load(r,o,n)};this.getPath=t=>(t===void 0&&(this.options.spa&&(t=window.location.pathname.slice(1)),t||(t=window.location.hash.slice(1))),t??"");t=Object.assign({},t),t.element||(t.element={root:document.body}),(typeof t.element!="object"||!("root"in t.element))&&(t.element={root:t.element}),this.options=t,window.addEventListener("beforeunload",o=>this.load(void 0,o)),window.addEventListener("popstate",o=>this.load(void 0,o)),window.addEventListener("DOMContentLoaded",o=>{Dn=!0,(!this.loaded||this.loaded.path==="")&&this.load(void 0,o)})}},eo=nt;var _e=new eo({spa:!0,element:{root:document.body,target:"#content"}});_e.setRoot(ve);_e.set("about",Se);_e.set("work",Pe);_e.load();
//# sourceMappingURL=index.esm.js.map
