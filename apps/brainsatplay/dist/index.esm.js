var Ht=Object.defineProperty;var I=(e,t)=>{for(var o in t)Ht(e,o,{get:t[o],enumerable:!0})};var Ee={};I(Ee,{content:()=>ro,footer:()=>io,nav:()=>so});var ie={};I(ie,{__onconnected:()=>qt,header:()=>Jt,text:()=>Vt});function qt(){this.header!==void 0&&(this.header.__element.innerText=this.header),this.text!==void 0&&(this.text.__element.innerHTML=this.text)}var Jt={__element:"h3",__attributes:{innerText:"Header"}},Vt={__element:"p",__attributes:{innerHTML:"This is the text."}};var Z={};I(Z,{__attributes:()=>Zt,__onconnected:()=>Yt,container:()=>Qt});function Yt(){["number","title","description"].forEach(t=>{this[t]!==void 0&&(this.container[t].__element.innerText=this[t])}),this.projects!==void 0&&this.projects.forEach(t=>{let o=document.createElement("li"),n=document.createElement("a"),s=document.createElement("sub");s.style.fontSize="75%",s.style.userSelect="none",t.active===!1?(o.style.opacity="0.5",o.style.pointerEvents="none",o.style.userSelect="none"):(t.oncreate&&t.oncreate(o),t.onclick?n.onclick=t.onclick:t.href&&(n.href=t.href)),o.appendChild(n),o.appendChild(s),n.innerText=t.name,s.innerText=` ${t.version}`,this.container.projects.__element.appendChild(o)})}var Zt={style:{padding:"1rem"}},Qt={number:{__element:"p",__attributes:{innerText:"",style:{fontSize:"0.9rem",paddingBottom:"0.5rem",margin:"0px"}}},title:{__element:"h3",__attributes:{innerText:"Feature"}},description:{__element:"p",__attributes:{innerText:"This is a feature that is featured."}},projects:{__element:"ul"}};var we={};I(we,{__element:()=>oo,__onconnected:()=>no,channel:()=>Xt,height:()=>to,width:()=>eo});var Xt="brainsatplay",eo="100%",to=480,oo="div",no=function(){let e=document.createElement("script");e.src="https://embed.twitch.tv/embed/v1.js",document.body.appendChild(e),e.onload=()=>{new Twitch.Embed(this.__element,{width:this.width,height:this.height,channel:this.channel})}};var tt={borderBottom:"2px solid white",paddingBottom:"0.5rem",paddingRight:"1rem"},ot={list:[],__element:"ul",__onconnected:function(){this.__element.innerHTML="",this.list.forEach(e=>{let t=document.createElement("li"),o=document.createElement("a");o.innerText=e.label,t.appendChild(o),this.__element.appendChild(t),e.oncreate&&e.oncreate(t),e.onclick?o.onclick=e.onclick:o.href=e.href})}},nt=[{label:"Home",href:"/"},{label:"About",href:"#about"},{label:"Work",href:"#work"},{label:"Ethos",href:"#ethos"},{label:"Twitch",href:"#twitch"}],so={__element:"nav",__childposition:0,__attributes:{style:{position:"fixed",top:"0px",right:"0px",paddingRight:"2rem"}},list:{list:nt,__compose:ot,__attributes:{style:{textTransform:"uppercase"}}}},ro={__element:"main",__childposition:0,hero:{__element:"section",__childposition:0,container:{title:{__element:"h1",__attributes:{innerText:"Brains@Play"}},subtitle:{__element:"h2",__attributes:{innerText:"The Universal Web Development Cooperative"}},description:{__element:"p",__attributes:{innerText:"We empower everyone to build better apps\u2014together."}}}},about:{__element:"section",__childposition:1,__attributes:{style:{background:"darkslategray"}},container:{title:{text:{__element:"h2",__attributes:{innerText:"About Us"}},support:{__element:"a",__attributes:{href:"https://opencollective.com/brainsatplay",target:"_blank"},image:{__element:"img",__attributes:{height:40,src:"https://opencollective.com/brainsatplay/contribute/button@2x.png?color=white"}}},__attributes:{style:{display:"flex",justifyContent:"space-between",alignItems:"center",...tt}}},description:{__element:"p",__attributes:{innerHTML:"Brains@Play is currently led by two developers\u2014<a href='https://github.com/garrettmflynn' target='_blank'>Garrett Flynn</a> and <a href='https://github.com/garrettmflynn' target='_blank'>Joshua Brewster</a>\u2014working to build a better Web with free software."}},statements:{__attributes:{style:{display:"flex",flexWrap:"wrap"}},mission:{header:"Mission",text:"Make code universally <a>shareable</a>, <a>modifiable</a>, and <a>usable</a>.",__compose:ie,__attributes:{style:{flexBasis:"50%",padding:"15px"}}},vision:{header:"Vision",text:"Engulf the Web in public experiments of communal organization and citizen science, engineering, and art.",__compose:ie,__attributes:{style:{flexBasis:"50%",padding:"15px"}}}}}},ethos:{__element:"section",__childposition:2,container:{title:{__element:"h2",__attributes:{innerText:"Our Ethos",style:{...tt}}},featureone:{number:"1",title:"Recompose the Web",description:"We are consuming the infrastructure of the Web.",projects:[{name:"ES Components (ESC)",link:"https://github.com/brainsatplay/escomponent",version:"0.1.7",description:"A specification for composable JavaScript objects with concurrent message-passing."},{name:"ESCode",link:"https://github.com/brainsatplay/escode",version:"0.1.7",description:"A framework for using ES Components using graphscript."},{name:"Web Source Accessibility Guidelines (WSAG)",active:!1,version:"0.0.0",description:"Identify best practices to allow anyone to use, modify, and share Web Components."}],__compose:Z},featuretwo:{number:"2",title:"Make Software Yours",description:"Bring yourself to every page.",projects:[{name:"Browser Extension",link:"https://github.com/brainsatplay/brainsatplay-extension",version:"0.0.0",oncreate:e=>{let t="brainsatplay-injection-proxy",o=s=>{window.postMessage({source:s,command:"openOptions"})},n=()=>{let s=!1;e.onclick=()=>{let a="https://github.com/brainsatplay/brainsatplay-extension";window.open(a,"_blank")};let r=document.getElementById(t);if(r&&r.getAttribute("data-version")){let l=r.getAttribute("data-id");s=!0,e.onclick=()=>o(l)}return s};window.onload=function(){n()||setTimeout(n,100)}},description:"Apply components across web pages."},{name:"Desktop App",link:"https://github.com/brainsatplay/brainsatplay-electron",version:"0.0.0",onclick:()=>{customProtocolCheck("brainsatplay://",()=>{window.open("https://github.com/brainsatplay/brainsatplay-desktop","_blank"),console.log("Custom protocol not found.")},()=>{console.log("Custom protocol found and opened the file successfully.")})},description:"Create composable cross-platform web systems."}],__compose:Z},featurethree:{number:"3",title:"Free Public Experimentation",description:"We are supporting new scientific and human-computer interaction (HCI) advances that drive experimentation on the Web and translate quickly across sites.",projects:[{name:"WebNWB",link:"https://github.com/brainsatplay/webnwb",description:"Enable citizen neuroscience.",version:"0.0.12"},{name:"MyAlyce",link:"https://myalyce.com",description:"Enable citizen neuroscience.",version:"0.0.0"}],__compose:Z}},twitch:we}},io={__element:"footer",__childposition:2,__attributes:{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",backgroundColor:"black",color:"white",padding:"25px 50px"}},title:{text:{__element:"span",__attributes:{innerText:"\xA9 Brains@Play 2022"}}},links:{__compose:ot,list:[...nt]},social:{__element:"ul",email:{__element:"li",link:{__element:"a",__attributes:{href:"mailto:contact@brainsatplay.com",innerText:"contact@brainsatplay.com"}}},newsletter:{__element:"li",link:{__element:"a",__attributes:{href:"https://brainsatplay.substack.com",innerText:"Sign up for our newsletter",style:{fontSize:"0.8rem"}}}}}};var ke={};I(ke,{hero:()=>ao});var ao={__element:"section",container:{title:{__element:"h1",__childposition:0,__attributes:{innerText:"About Us"}},subtitle:{__element:"h2",__childposition:1,__attributes:{innerText:"It all began with a dream of agency for every brain."}},description:{__element:"p",__childposition:2,__attributes:{innerText:"We started working in 2021 and never stopped."}},message:{__element:"p",__childposition:3,__attributes:{innerText:"Now it's cool to have a brain!"}}}};var Oe={};I(Oe,{hero:()=>lo});var lo={__element:"section",container:{title:{__element:"h1",__attributes:{innerText:"Our Work"}},subtitle:{__element:"h2",__attributes:{innerText:"The Universal Web Development Cooperative"}}}};var co="[object Module]",W=e=>!!(e&&(!!Object.keys(e).reduce((o,n)=>{let s=Object.getOwnPropertyDescriptor(e,n),r=s&&s.get&&!s.set?1:0;return o+r},0)||Object.prototype.toString.call(e)===co));var rt=(e,t)=>{if(e&&typeof e=="object"&&t&&typeof t=="object"){let o=JSON.stringify(e),n=JSON.stringify(t);return o===n}else return e===t},B=(e,t)=>Promise.all(Object.getOwnPropertySymbols(e).map(o=>t(o,e[o]))),C=(e,t)=>{let o=t.path[e];if(!o)throw new Error("Invalid Path Type");return o.filter(s=>typeof s=="string").join(t.keySeparator)},ae=(e,t)=>{let o=e;return typeof e=="string"?o=e.split(t.keySeparator):typeof e=="symbol"&&(o=[e]),{id:o[0],path:o.slice(1)}},G=(e,t,o,n,s=!0)=>{if(e instanceof Function&&(n&&typeof n=="object"&&typeof n.then=="function"?n.then(r=>e(t,o,r)):e(t,o,n)),s&&globalThis.ESMonitorState){let r=globalThis.ESMonitorState.callback;globalThis.ESMonitorState.state[t]={output:n,value:o},G(r,t,o,n,!1)}};var po=60,Q=class{constructor(t,o){this.listeners={};this.setOptions=(t={})=>{for(let o in t)this[o]=t[o]};this.add=t=>{let o=t.sub;return this.listeners[o]=t,this.start(),!0};this.get=t=>this.listeners[t];this.remove=t=>{delete this.listeners[t],Object.keys(this.listeners).length||this.stop()};this.poll=t=>{B(t,(o,n)=>{let{callback:s,current:r,history:a}=n;n.path.resolved||(n.path.resolved=C("output",n)),rt(r,a)||(G(s,n.path.resolved,{},r),typeof r=="object"?Array.isArray(r)?a=[...r]:a={...r}:t[o].history=r)})};this.start=(t=this.listeners)=>{this.sps?this.#e||(console.warn("[escode]: Starting Polling!"),this.#e=setInterval(()=>this.poll(t),1e3/this.sps)):this.sps=po};this.stop=()=>{this.#e&&(console.warn("[escode]: Stopped Polling!"),clearInterval(this.#e),this.#e=void 0)};t&&(this.listeners=t),o&&(this.sps=o)}#e;#t;get sps(){return this.#t}set sps(t){this.#t=t;let o=this.listeners;Object.keys(o).length&&(this.stop(),this.start())}};var ee={};I(ee,{functionExecution:()=>ue,functions:()=>ht,getProxyFunction:()=>Me,info:()=>he,register:()=>ut,set:()=>Te,setterExecution:()=>fe,setters:()=>Fe});globalThis.ESMonitorState={state:{},callback:void 0,info:{}};var at=globalThis.ESMonitorState;var fo=async(e,t)=>{let o=globalThis.performance.now(),n=await e(...t),s=globalThis.performance.now();return{output:n,value:s-o}},lt={performance:fo},ct=(e,t,o)=>{let n={value:{},output:void 0},s={...at.info,...o};for(let r in s)if(s[r]&&lt[r]){let a=e;e=async(...l)=>{let p=await lt[r](a,l);return n.value[r]=p.value,p.output}}return n.output=e(...t),n};var j=Symbol("isProxy"),X=Symbol("fromInspectable"),mn=Symbol("fromInspectableHandler");var A=".",mo="default",U="__esmpileSourceBundle",Ce={isGraphScript:"__",default:mo,parent:"__parent",promise:"__childresolved",component:"__component",proxy:"__proxy"},i={...Ce,start:"__onconnected",stop:"__ondisconnected",connected:"__connected",resolved:"__resolved",started:"__started",element:"__element",webcomponents:"__define",attributes:"__attributes",listeners:{value:"__listeners",branch:"__branch",bind:"__bind",trigger:"__trigger",format:"__format"},trigger:"__trigger",compose:"__compose",apply:"__apply",uri:"src",reference:"ref",childPosition:"__childposition",attribute:"escomponent",options:"__options",source:"__source",path:"__path",animate:"__animate",states:"__states",editor:"__editor",original:"__original",resize:"__onresize"};var pt=(e,t)=>e in t,ho=(e,t,o)=>{let n=t[e[0]];if(n){let s=n[e.slice(1).join(o)];if(s)return s}},le=(e,t,o={})=>{let n=o.fallbacks??[],s=o.keySeparator??A;if(o.shortcuts){let p=ho(t,o.shortcuts,s);if(p)return o.output==="info"?{value:p,exists:!0,shortcut:!0}:p}typeof t=="string"?t=t.split(s).flat():typeof t=="symbol"&&(t=[t]);let r;t=[...t],t=t.map(p=>typeof p=="string"?p.split(s):p).flat();let a=e,l=[a];for(let p=0;p<t.length;p++)if(a){let c=t[p];r=pt(c,a),r?a=a[c]:(a=void 0,r=!0),l.push(a)}return o.output==="info"?{value:a,exists:r,parent:l[l.length-2]}:a},ce=(e,t,o,n={})=>{let s=n?.create??!1,r=n?.keySeparator??A;typeof e=="string"?e=e.split(r):typeof e=="symbol"&&(e=[e]),e=[...e];let a=[...e],l=a.pop();for(let p=0;p<a.length;p++){let c=a[p],f=pt(c,o);s&&!f&&(o[c]={},f=!0),f&&(o=o[c])}return o[l]=t,!0};var Ae={};I(Ae,{functions:()=>bo,objects:()=>je});function yo(e,t){let o=this,n=this.target;if(!this.parent){let s=n[e];try{Object.defineProperty(n,e,{get:()=>s,set:function(r){s=r,o.proxy[e]={[j]:this[j],[X]:!0,value:r}},enumerable:!0,configurable:!0})}catch{console.error(`Could not reassign ${e} to a top-level setter...`)}}t&&this.newKeys.add(e),this.create(e,n,void 0,!0)}var pe=yo;var bo=function(){let e=this;return{apply:async function(t,o,n){try{let s=t;n[0]?.[X]&&(s=n[0].value,n=n.slice(1));let a=e.listeners.functions,l=e.path.join(e.options.keySeparator),p=a?a[l]:void 0,c,f={};p?(f=ue(o,p,s,n),c=f.output):(c=s.apply(o,n),f=e?.state?.[l]?.value??{});let u=e.options.callback;return G(u,l,f,c),c}catch(s){console.warn("Function failed:",s,e.path)}}}},je=function(){let e=this;return{get(t,o,n){return o===j?!0:Reflect.get(t,o,n)},set(t,o,n,s){if(o===j)return!0;let r=[...e.path,o].join(e.options.keySeparator),a=n?.[j],l=n?.[X];l&&(n=n.value);let p=e.listeners.setters,c=Object.getOwnPropertyDescriptor(t,o);if(c&&!c.get&&!c.set&&typeof e.options.globalCallback=="function"){let y=e.path[0];pe.call(e,o,!0),Te("setters",r,n,e.options.globalCallback,{[y]:e.root},e.listeners,e.options)}if(n||typeof n=="function"){let y=e.create(o,t,n);y&&(n=y)}let u=!a;if(p&&u&&!e.newKeys.has(o)){let y=p[r];y&&fe(y,n)}let b=e.options.callback,S=e?.state?.[r]?.value??{};return G(b,r,S,n),l||!u?!0:Reflect.set(t,o,n,s)}}};var R=typeof process=="object";var go=(e,t,o)=>{try{o===void 0&&(o=e[t])}catch(c){return c}if(e[t]&&e[t][j])return!1;let s=typeof o,r=s==="object",a=s=="function";if(!o||!(r||a)||!R&&o instanceof Element||o instanceof EventTarget)return!1;let p=r&&W(o);if(a)return!0;{let c=Object.getOwnPropertyDescriptor(e,t);if(c&&(c.value&&c.writable||c.set)){if(!p)return!0}else if(!e.hasOwnProperty(t))return!0}return!1},D=class{constructor(t={},o={},n,s){this.path=[];this.listeners={};this.newKeys=new Set;this.state={};this.set=(t,o,n)=>{this.state[t]={output:n,value:o},ce(t,n,this.proxy,{create:!0})};this.check=go;this.create=(t,o,n,s=!1)=>{let r=this.check(o,t,n);if(n===void 0&&(n=o[t]),r&&!(r instanceof Error))return o[t]=new D(n,this.options,t,this),o[t];if(s)try{this.proxy[t]=n??o[t]}catch(a){let l=W(o),p=[...this.path,t];console.error(`Could not set value (${p.join(this.options.keySeparator)})${l?" because the parent is an ESM.":""}`,l?"":a)}};if(o.pathFormat||(o.pathFormat="relative"),o.keySeparator||(o.keySeparator=A),t.__proxy)this.proxy=t.__proxy;else if(t[j])this.proxy=t;else{this.target=t,this.options=o,this.parent=s,this.parent?(this.root=this.parent.root,this.path=[...this.parent.path],this.state=this.parent.state??{}):this.root=t,n&&this.path.push(n),this.options.listeners&&(this.listeners=this.options.listeners),this.options.path&&(this.options.path instanceof Function?this.path=this.options.path(this.path):Array.isArray(this.options.path)?this.path=this.options.path:console.log("Invalid path",this.options.path)),this.path&&(this.path=this.path.filter(l=>typeof l=="string")),this.options.keySeparator||(this.options.keySeparator=A);let r=this.options.type;r!="object"&&(r=typeof t=="function"?"function":"object");let a=Ae[`${r}s`].call(this);r==="function"&&(a={...a,...je.call(this)}),this.proxy=new Proxy(t,a),Object.defineProperty(t,"__proxy",{value:this.proxy,enumerable:!1}),Object.defineProperty(t,"__esInspectable",{value:this,enumerable:!1});for(let l in t)pe.call(this,l)}return this.proxy}};var me=(e,t,o,n)=>{let s=n.reference,r=Array.isArray(e)?e[0]:typeof e=="string"?e.split(o.keySeparator)[0]:e,a=n.hasOwnProperty("static")?!n.static:!1;a&&!globalThis.Proxy&&(a=!1,console.warn("Falling back to using function interception and setters...")),a&&(t=new D(t,{pathFormat:o.pathFormat,keySeparator:o.keySeparator,listeners:n.listeners,path:p=>p.filter(c=>!o.fallbacks||!o.fallbacks.includes(c))},r));let l={keySeparator:o.keySeparator,...n};return ce(e,t,s,l),t};var he=(e,t,o,n,s,r,a,l={})=>{typeof o=="string"&&(o=o.split(a.keySeparator));let p=o.join(a.keySeparator),c=s,f=l.ref,u=l.path,b=h=>le(f??s,h,{keySeparator:a.keySeparator,fallbacks:a.fallbacks}),S=(h,x)=>{me(h,x,a,{reference:f??s,listeners:r})},y=a.onUpdate,v={};y&&typeof y=="object"&&y.callback instanceof Function&&(v=y.info??{},y=y.callback);let d=[e,...o],g={absolute:d,relative:p.split(a.keySeparator),parent:d.slice(0,-1)};g.output=g[a.pathFormat];let m={id:e,path:g,keySeparator:a.keySeparator,infoToOutput:v,callback:(...h)=>{let x=t(...h);return y instanceof Function&&y(...h),x},get current(){return b(u??m.path.absolute)},set current(h){S(u??m.path.absolute,h)},get parent(){return b(u?u?.slice(0,-1):m.path.parent)},get reference(){return c[e]},set reference(h){c[e]=h},original:n,history:typeof n=="object"?Object.assign({},n):n,sub:Symbol("subscription"),last:o.slice(-1)[0]};return m},ft=(e,t,o)=>{if(o){let n=Math.random();o.symbol[t]={name:e,id:n},o.name[e]||(o.name[e]={}),o.name[e][n]=t}},ut=(e,t,o)=>{let n=C("absolute",e);return t[n]||(t[n]={}),t[n][e.sub]=e,ft(n,e.sub,o),!0},Le={functions:ht,setters:Fe},Te=(e,t,o,n,s,r,a)=>{let{id:l,path:p}=ae(t,a),c=he(l,n,p,o,s,Le,a);if(Le[e])Le[e](c,r,r.lookup);else{let f=C("absolute",c);r[e][f][c.sub]=c,r.lookup&&ft(f,c.sub,r.lookup)}},_o=(e,t)=>t[C("absolute",e)],mt=(e,t,o,n)=>{let s=!!_o(e,t);if(!s){let r=e.parent,a=r?.[e.last];s=o(a,r)}return ut(e,t,n)},fe=(e,t)=>B(e,(o,n)=>{let s=C("output",n);G(n.callback,s,{},t)});function Fe(e,t,o){let n=this;return mt(e,t.setters,(s,r)=>{let a=s;if(!!r&&!r[j]){let l=!0;try{delete r[e.last]}catch{console.error("Unable to redeclare setters. May already be a dynamic object..."),l=!1}if(l){let p=e.last.slice(0,2)==="__";try{Object.defineProperty(r,e.last,{get:()=>a,set:async c=>{let f=typeof a=="function";if(a=c,f)a=Me.call(n,e,t,a);else{let u=Object.assign({},t.setters[C("absolute",e)]);fe(u,c)}},enumerable:p,configurable:!0})}catch(c){throw c}}}},o)}function Me(e,t,o){return function(...n){let s=t.functions[C("absolute",e)];return ue(this,s,o??e.original,n).output}}var ue=(e,t,o,n)=>{t=Object.assign({},t);let s=Object.getOwnPropertySymbols(t),r=t[s[0]]??{},a=ct((...l)=>o.call(e,...l),n,r.infoToOutput);return B(t,(l,p)=>{let c=C("output",p);G(p.callback,c,a.value,a.output)}),a};function ht(e,t,o){return mt(e,t.functions,(n,s)=>{if(!s[j])return s[e.last]=Me.call(this,e,t),Fe(e,t,o)},o)}var de=(e,t,o)=>{let n=o.accumulator;n||(n=o.accumulator={});let s=o.ignore||[],r=o.path||[],a=o.condition||!0,l=[],p=[],c=(f,u={},b)=>{for(let S in f){if(s.includes(S))continue;let y=f[S],v=[...b.path,S],d={typeof:typeof y,name:y?.constructor?.name,simple:!0,object:y&&typeof y=="object",path:v};if(d.object){let g=d.name;if(W(y)||g==="Object"||g==="Array"){d.simple=!0;let m=l.indexOf(y);if(m!==-1)u[S]=p[m];else{l.push(y);let h=a instanceof Function?a(S,y,d):a;d.pass=h,u[S]=t(S,y,d),h&&(p.push(u[S]),u[S]=c(y,u[S],{...b,path:v}))}}else d.simple=!1,u[S]=t(S,y,d)}else u[S]=t(S,y,d)}return u};return c(e,n,{path:r})};var dt=()=>({symbol:{},name:{}}),xo=typeof process=="object",te=class{constructor(t={}){this.poller=new Q;this.options={pathFormat:"relative",keySeparator:A};this.listeners={polling:this.poller.listeners,functions:{},setters:{},lookup:dt()};this.references={};this.get=(t,o,n=this.references)=>le(n,t,{keySeparator:this.options.keySeparator,fallbacks:this.options.fallbacks,output:o});this.set=(t,o,n={})=>{let s={...n};return s.reference||(s.reference=this.references),s.listeners||(s.listeners=this.listeners),me(t,o,this.options,s)};this.on=(t,o)=>{let n=ae(t,this.options);return this.listen(n.id,o,n.path)};this.getInfo=(t,o,n,s)=>{let r=he(t,o,n,s,this.references,this.listeners,this.options),a=Math.random(),l=this.listeners.lookup,p=C("absolute",r);return l.symbol[r.sub]={name:p,id:a},l.name[p]||(l.name[p]={}),l.name[p][a]=r.sub,r};this.listen=(t,o,n=[],s={})=>{typeof n=="string"?n=n.split(this.options.keySeparator):typeof n=="symbol"&&(n=[n]);let r=n,a=this.get(t);if(!a){console.error("Reference does not exist.",t);return}s.poll||(s.poll=W(a)),s.seen||(s.seen=[]);let l=s,p=[t,...r],c=this.get(p),f=(v,d=!1)=>!(v&&typeof v=="object")||!xo&&v instanceof Element?!1:d?!0:!Array.isArray(v),u={},b=!1;f(c,!0)&&(c.__esInspectable&&(c.__esInspectable.options.globalCallback=o),de(c,(v,d,g)=>{if(!g.pass){let P=[...r,...g.path],m=this.listen(t,o,P,l);Object.assign(u,m)}},{condition:(v,d)=>f(d)}),b=!0);let y;try{if(y=this.getInfo(t,o,r,c),y&&!b)if(l.poll)b=this.poller.add(y);else{let v="setters";typeof c=="function"&&(v="functions"),b=this.add(v,y)}}catch(v){console.error("Fallback to polling:",n,v),b=this.poller.add(y)}if(b){if(u[C("absolute",y)]=y.sub,this.options.onInit instanceof Function){let v={};for(let d in y.infoToOutput)v[d]=void 0;this.options.onInit(C("output",y),v)}return u}else{console.error("Failed to subscribe to:",n);return}};this.add=(t,o)=>ee[t]?ee[t](o,this.listeners,this.listeners.lookup):(this.listeners[t][C("absolute",o)][o.sub]=o,!0);this.remove=t=>{t||(t={...this.listeners.functions,...this.listeners.setters,...this.listeners.polling}),typeof t!="object"&&(t={sub:t});for(let o in t){let n=t[o],s=r=>{this.unsubscribe(r)===!1&&console.warn(`Subscription for ${o} does not exist.`,r)};typeof n!="symbol"?B(n,s):s(n)}return!0};this.unsubscribe=t=>{let o=this.listeners.lookup.symbol[t],n=o.name,s=this.poller.get(t),r=this.listeners.functions[n],a=r?.[t],l=this.listeners.setters[n],p=l?.[t];if(s)this.poller.remove(t);else if(a)delete r[t],Object.getOwnPropertySymbols(r).length||(Object.defineProperty(a.parent,a.last,{value:a.original,writable:!0}),delete this.listeners.functions[n]);else if(p){if(delete l[t],!Object.getOwnPropertySymbols(l).length){let f=p.parent;if(f){let u=p.last,b=f[u];Object.defineProperty(f,u,{value:b,writable:!0})}delete this.listeners.setters[n]}}else return!1;delete this.listeners.lookup.symbol[t];let c=this.listeners.lookup.name[o.name];delete c[o.id],Object.getOwnPropertyNames(c).length||delete this.listeners.lookup.name[o.name]};Object.defineProperty(this.listeners,"lookup",{value:dt(),enumerable:!1,configurable:!1}),Object.assign(this.options,t),this.poller.setOptions(t.polling)}};var oe=te;var Ge={};function K(e){var t=[];if(e)do{let o=e.constructor?.name,n=globalThis[o]&&typeof globalThis[o]=="function";globalThis[o]&&(Ge[o]||(Ge[o]=[...Object.getOwnPropertyNames(globalThis[o].prototype)])),Object.getOwnPropertyNames(e).forEach(function(s){n&&Ge[o].includes(s)||t.indexOf(s)===-1&&t.push(s)})}while(e=Object.getPrototypeOf(e));return t}var Re=(e,t={})=>{if(typeof e=="object")if(Array.isArray(e))e=[...e],t.accumulator=[];else{let o=K(e),n={};for(let s of o)n[s]=e[s];e=n,t.accumulator={}}return e},T=(e,t={})=>typeof e!="object"?e:(e=Re(e,t),de(e,(o,n,s)=>s.simple&&s.object?Array.isArray(n)?[]:{}:n,t),t.accumulator);var yt=e=>typeof e=="object"&&typeof e.then=="function",k=(e,t)=>(typeof e=="object"&&Array.isArray(e)&&e.find(o=>yt(o))&&(e=Promise.all(e)),yt(e)?new Promise(o=>{e.then(async n=>{let s=t?t(n):n;o(s)})}):t?t(e):e),bt=[],H=(e,t,o=!1,n=!1,s=!1,r=[])=>{let a=o?e:Re(e);if(n&&([a,t]=[t,a]),t){let l=K(a),p=new Set(K(t));l.forEach(c=>{p.delete(c);let f=c in t,u=t[c];if(f&&u===void 0)delete a[c];else if(typeof u=="object"&&!Array.isArray(u))if(typeof a[c]=="object"){let b=a[c],S=r.indexOf(b);S!==-1?a[c]=r[S]:(r.push(b),a[c]=H(b,u,o,!1,s,r))}else a[c]=u;else if(typeof u=="function"){let b=a[c],S=typeof b=="function",y=u,v=y.__compose===!0;if(!S||!s&&!v)a[c]=y;else{let d=bt.find(P=>P.f===b),g=b;if(d||(g.__esInspectable&&(g=g.__esInspectable.target),d={f:g,list:[g]},bt.push(d)),d.list.includes(y))console.warn("This function was already composed. Ignoring duplicate.");else{let P=a[c]=function(...m){let h=g.call(this,...m);return y.call(this,...Array.isArray(h)?h:[h])};d.f=P,d.list.push(y)}}}else c in t&&(a[c]=u)}),p.forEach(c=>{let f=t[c];f!==void 0&&(a[c]=f)})}return a};var Ne={};I(Ne,{behavior:()=>ko,default:()=>$e,name:()=>Eo,properties:()=>Oo});var vo=async(e,t)=>{let o=await fetch(e).then(n=>n.arrayBuffer());return WebAssembly.instantiate(o,t)},Po=async(e,t)=>(t||(t={env:{abort:()=>console.log("Abort!")}}),WebAssembly.instantiateStreaming?await WebAssembly.instantiateStreaming(fetch(e),t):await vo(e,t)),gt=Po;var _t=(e,t)=>e[i.reference]?(console.warn("[escompose]: Falling back to ES Component reference...",t),e[i.reference]):wo(t.message),xt=`Cannot transform ${i.compose} string without a compose utility function`;function ye(e,t){let o=typeof e=="string"?e:e[i.uri];if(o&&o.slice(-5)===".wasm"){let n=e.relativeTo??t?.relativeTo??window.location.href;n.slice(-1)[0]!=="/"&&(n+="/");let s=new URL(o,n).href;return new Promise(async r=>{let a=await gt(s,e.importOptions),l=Object.assign({},a.instance.exports);for(let p in l){let c=l[p];c instanceof WebAssembly.Memory?l[p]=new Uint8Array(c.buffer):c instanceof WebAssembly.Global&&Object.defineProperty(l,p,{get:()=>c.value,set:f=>c.value=f})}r(l)})}else if(o&&t.utilities){let n=t.utilities.bundle,s=n&&typeof n.function=="function",r=t.utilities.compile,a=r&&typeof r.function=="function";if(!s&&!a)e=_t(e,new Error(xt));else return new Promise(async l=>{try{if(s){let p=n.options??{};p.bundler||(p.bundler="datauri"),p.bundle||(p.collection="global"),p.relativeTo||(p.relativeTo=t.relativeTo??".");let c=n.function(o,p);await c.compile(),e=Object.assign({},c.result)}else if(a){let p=r.options??{};p.relativeTo||(p.relativeTo=t.relativeTo??"."),e=await r.function(e,p)}else throw new Error(xt)}catch(p){e=_t(e,p)}l(T(e))})}return T(e[i.reference]??e)}function wo(e){return{[i.element]:"p",b:{[i.element]:"b",[i.attributes]:{innerText:"Error: "}},span:{[i.element]:"span",[i.attributes]:{innerText:e}}}}var Eo="compose",q={compose:i.compose,apply:i.apply,bundle:U},ko="load",Oo={dependents:Object.values(q)},Co=e=>typeof e=="string"&&(e.includes("/")||e.includes("."));function Io(e,t,o,n=!1){return e=H(e,t,n),e=St(e,e[q.compose],o,!0,n),k(e,s=>{let r=s[q.apply];return s=r&&(typeof r=="object"||Co(r))?St(s,r,o,!1,n):s,k(s)})}var $e=Io;function St(e,t={},o={},n=!1,s=!1){Array.isArray(t)||(t=[t]);let r=k(t.map(a=>{let l=ye(a,o),p=(c,f=[],u=!0)=>{if(Array.isArray(c))c.forEach(b=>p(b,f),!0);else if(c[q.compose]){f.push(c);let b=c[q.compose];delete c[q.compose];let S=k(ye(b,o));p(S,f)}else u&&f.push(c);return f};return k(l,c=>p(c))}));return k(r,a=>{let l=a.flat(),p={};return l.forEach(c=>p=H(p,c,!1,!1)),H(e,p,s,n)})}var ne=Symbol("return");var jo=e=>typeof e=="function"&&e.hasOwnProperty("prototype")&&!e.hasOwnProperty("arguments");function Ke(e,t={},o={}){if(R||e instanceof NodeList&&(e=Array.from(e)),typeof e=="string")e={[i.apply]:e};else if(typeof e=="function")jo(e)?e=new e(t,o):e={[i.default]:e};else if(!R&&e instanceof Element){let s=e[i.component];if(s){t=T(t);let r=t.__compose,a=t.__apply;return delete t.__compose,delete t.__apply,r&&(console.warn("Cannot compose a component onto an element that already has a component. Merging with the base object instead..."),t=Object.assign(r,t)),a&&(console.warn("Cannot apply a component onto an element that already has a component. Applying to the base object instead..."),t=Object.assign(t,a)),$e(s,t,o,!0),{[ne]:s}}else e={[i.element]:e}}else{if(Array.isArray(e))return e;if(typeof e!="object")throw new Error(`Invalid configuration type: ${typeof e}. Expected object or string.`)}return o.clone?T(e):e}var vt=e=>{let t=T(e),o;return t.monitor instanceof oe?(o=t.monitor,t.keySeparator=o.keySeparator):(t.monitor||(t.monitor={}),t.monitor.keySeparator||(t.keySeparator||(t.keySeparator=A),t.monitor.keySeparator=t.keySeparator),t.monitor=new oe(t.monitor)),t};var ms={dependencies:[i.isGraphScript,i.parent],dependents:[]},Ao=(e,t={},o={})=>{let n=e[i.isGraphScript],s=t[i.parent],r=t[i.isGraphScript]?.path??n.path;s=(!R&&s instanceof Element?s?.[i.component]:s)??e[i.parent];let a={value:"",enumerable:!1,writable:!0};if(s){let l=s[i.isGraphScript];if(l&&typeof r=="string"){let p=l.path;p?a.value=[p,r]:a.value=[r],a.value=a.value.join(o.keySeparator??".")}}Object.defineProperty(n,"path",a)},be=Ao;var Pt="default",wt="__operator",L={path:"__path",isGraphScript:"__",listeners:{value:"__listeners",branch:"__branch",bind:"__bind",trigger:"__trigger",format:"__format"}},Et=Symbol("listenerObject"),kt=Symbol("toSet"),se=Symbol("subscriptionKey"),Ot=Symbol("configKey"),ze=Symbol("toResolveWithKey"),To=e=>L.listeners.format in e||L.listeners.branch in e||L.listeners.trigger in e||L.listeners.bind in e,Ct="INITIALIZED",It="REGISTERED",Lo={},Fo={},Mo={},We=class{constructor(t,o,n){this.original={};this.active={};this.globals={};this.context={options:{}};this.rootPath="";this.status="";this.#e=[];this.#t=[];this.setInitialProperties=(t={},o,n={})=>{Object.assign(this.context,n),o&&(this.rootPath=o),this.context.options.keySeparator||(this.context.options.keySeparator=this.context.monitor.options.keySeparator),this.original=t,[{name:"active",ref:Mo},{name:"from",ref:Lo},{name:"to",ref:Fo}].forEach(r=>{r.ref[this.context.id]||(r.ref[this.context.id]={}),this.globals[r.name]=r.ref[this.context.id]}),this.#n=this.getManager(),this.runEachListener(t,this.addToGlobalLog)};this.getManager=(t="from")=>{let o=t==="to"?this.globals.to:this.globals.from;return this.rootPath.split(this.context.options.keySeparator).forEach(n=>{o[n]||(o[n]={}),o=o[n]}),o[ze]??this};this.onStart=t=>{let o=this.#n;o===this?this.status===Ct?t():this.#t.push(t):o.onStart(t)};this.runEachListener=(t,o)=>{if(!!o)for(let n in t){let s=t[n];if(!s){console.warn("Skipping empty listener:",n);continue}if(s&&typeof s=="object"){let r=s,a=n;for(let l in r)o(l,a,r[l])}else{let r=n,a=s,l=typeof a;l==="function"?o(r,"",a):l==="string"?o(r,a,a):console.error("Improperly Formatted Listener",a)}}};this.register=(t=this.original)=>{this.runEachListener(t,this.add),this.status=It};this.#r=t=>{let o=this.context.monitor.get(t.path,"info");if(typeof o.value=="function"){let n=Array.isArray(t.args)?t.args:[t.args];o.value(...n)}else console.error("Cannot yet trigger values...",t)};this.initialize=t=>{this.status?this.status===It?(this.status=Ct,this.#e.forEach(this.#r),this.#t.forEach(o=>o()),this.#t=[],this.#e=[]):this.#r(t):this.#e.push(t)};this.start=()=>{this.register(),this.initialize()};this.#s=t=>{let o=this.context.monitor.options.keySeparator;return!t||!this.rootPath||this.rootPath===t.slice(0,this.rootPath.length)&&t[this.rootPath.length]===o?t:[this.rootPath,t].join(o)};this.#o=t=>{let o={absolute:{},relative:{}};t=this.#s(t);let n=this.rootPath?t.replace(`${this.rootPath}.`,""):t,s=t.split(this.context.options.keySeparator);o.absolute.array=[this.context.id,...s],o.relative.array=n.split(this.context.options.keySeparator);let r=this.context.monitor.get(o.absolute.array,void 0);if(this.context.graph){if(r&&this.context.bound)o.absolute.array=[this.context.id,this.context.bound,...o.absolute.array.slice(1)],o.relative.array.unshift(this.context.bound);else if(!r){let f=o.relative.array.join(this.context.options.keySeparator);r=this.context.graph.get(f)}}let a=r&&typeof r=="object"&&L.isGraphScript in r,l=r&&a&&r[wt],p=r&&r[Pt],c=l?wt:p?Pt:void 0;return c&&(o.absolute.array.push(c),o.relative.array.push(c)),o.absolute.value=o.absolute.array.slice(1).join(this.context.options.keySeparator),o.relative.value=o.relative.array.join(this.context.options.keySeparator),o};this.add=(t,o,n=!0,s)=>{if(!n)return;let r=this.#o(t),a=this.#o(o),l=r.absolute.value;s||(s=this.globals.active[l]?.[se]),s||(s=this.context.monitor.on(r.absolute.array,(u,b,S)=>this.activate(u,S),{ref:this.context.instance,path:r.relative.array})),typeof n=="string"&&(n=a.absolute.array.slice(1).join(this.context.options.keySeparator));let p={value:n,[Et]:!0};[this.active,this.globals.active].forEach(u=>{u[l]||(u[l]={});let b=u[l];b[se]||Object.defineProperty(b,se,{value:s,configurable:!0}),b[a.absolute.value]=p});let f=n[L.listeners.trigger];return f&&this.#n.initialize({path:r.absolute.array,args:f}),this.addToGlobalLog(l),p};this.addToGlobalLog=(t,o="from")=>{let n=this.#s(t),s=o==="to"?this.globals.to:this.globals.from;n.split(this.context.options.keySeparator).forEach(a=>{s[a]||(s[a]={}),s=s[a],s[ze]||(s[ze]=this)})};this.remove=(t,o)=>{let n=this.#o(t),s=this.#o(o),r=[n.absolute.value,s.absolute.value];[{ref:this.active,path:r},{ref:this.globals.active,path:r,unlisten:!0}].forEach(l=>{let{ref:p,path:c,unlisten:f}=l,u=p[c[0]];if(typeof u=="object"){if(delete u[c[1]],Object.keys(u).length===0){delete p[c[0]];let b=u[se];f&&b&&this.context.monitor.remove(b),delete u[se]}}else delete p[c[0]]})};this.clear=t=>{let o=this.#s(t);Object.keys(this.active).forEach(n=>{Object.keys(this.active[n]).forEach(s=>{(!o||n.slice(0,o.length)===o||s.slice(0,o.length)===o)&&this.remove(n,s)})})};this.has=(t,o=this.active)=>!!o[t];this.get=(t,o=this.active)=>o[t];this.activate=(t,o)=>{[{info:this.get(t,this.globals.active),name}].forEach(s=>{let r=s.info;if(r)if(r[Et])this.pass(t,{value:r.value,parent:this.active,key:s.name,subscription:r.subscription,__value:!0},o);else if(typeof r=="object")for(let a in r)this.pass(t,{parent:r,key:a,subscription:r[a].subscription,value:r[a].value},o);else console.error("Improperly Formatted Listener",r)})};this.pass=(t,o,n)=>{let s=this.context.id,r=o?.__value,a=o.parent,l=o.key,p=o.parent[l];o=p.value;let c=p?.[Ot],f=o,u=typeof o,b=(d,g)=>{let P=this.context.monitor.get(d,"info");if(P.exists){let m=P.value,w={value:typeof m!="function"&&!m?.default?kt:m,bound:P.parent};return g&&(o=w.value,a[l]=w),w}else return{value:void 0}},S=d=>{let g=[s];return g.push(...l.split(this.context.options.keySeparator)),b(g,d)},y=d=>{let g=[s],P=[];return this.rootPath&&P.push(...this.rootPath.split(this.context.options.keySeparator)),P.push(...d.split(this.context.options.keySeparator)),g.push(...P),g};if(typeof o=="boolean")r?console.error(`Cannot use a boolean for ${L.listeners.value}...`):S(!0);else if(u==="string"){let d=y(f);b(d,!0),r&&(a[l]={[f]:a[l]},l=f)}else o&&u==="object"&&To(f)&&("value"in f?r?o=a[l]=f.value:o=a[l].value=f.value:S(!0),f&&f&&(c=f),Object.defineProperty(a[l],Ot,{value:c}));let v=!0;if(c){let d=L.listeners.value;if(d in c){let g=y(c[d].original??c[d]);if(typeof c[d]=="string"){let P=this.context.monitor.get(g);P?c[d]={value:P,original:c[d]}:o=`because ${g.slice(1).join(this.context.options.keySeparator)} does not point correctly to an existing component.`}else c[d].value.__parent||(o=`because ${c[d].original??s.toString()} has become unparented.`)}else{let g=L.listeners.branch,P=L.listeners.format;if(g in c&&(c[g].find(h=>{let x=[];"if"in h&&x.push(h.if(n)),"is"in h&&x.push(h.is===n);let w=x.length>0&&x.reduce((_,E)=>_&&E,!0);return w&&"value"in h&&(n=h.value),w})||(v=!1)),P in c)try{n=c[P](n),n===void 0&&(v=!1)}catch(m){console.error("Failed to format arguments",m)}}}if(v&&n!==void 0){let d=Array.isArray(n)?n:[n];if(o===kt){let g=[s];g.push(...l.split(this.context.options.keySeparator));let P=g.pop(),m=this.context.monitor.get(g,"info");m.value?m.value[P]=n:console.error(`Cannot set value on ${g.filter(h=>typeof h!="symbol").join(this.context.options.keySeparator)} from ${t}`)}else if(o?.default)o.default.call(o,...d);else if(typeof o=="function"){let g=c?.[L.listeners.bind]?.value??p.bound??this.context.instance;g?o.call(g,...d):o(...d)}else{let g=l?`listener: ${t} \u2014> ${l}`:`listener from ${t}`;a?(console.warn(`Deleting ${g}`,o),delete a[l]):console.error(`Failed to add ${g}`,o)}}};(t||o||n)&&this.setInitialProperties(t,o,n)}#e;#t;#n;#r;#s;#o},jt=We;function Be(e){let t=e;if(!t||typeof t!="object")return null;let o=Object.entries(t).map(([n,s])=>{if(!n.includes(i.isGraphScript)&&s&&typeof s=="object"?Object.keys(s).find(a=>a.includes(i.isGraphScript)):!1)return{ref:s,parent:t,name:n}}).filter(n=>n&&n.ref);return o.length===0?null:o}var Tt=(e,t,o)=>{let{main:n,overrides:s,options:r,create:a}=t,l;if(!Array.isArray(e)){if(!e[o])return n;let f=e;switch(e=f[o]??[],o){case"activate":l=[...f.load??[]];break;case"start":l=[...f.load??[],...f.activate??[]];case"stop":l=[...f.load??[],...f.activate??[],...f.start??[]];break}}let c=Ro(n,e,l);return c?c.reduce((f,u)=>k(f,b=>{let y=(typeof u=="function"?u:u.default)(b,s,r);return y&&typeof y=="object"?y:b}),n):n},Go=e=>{let t={};return e.forEach(o=>{let n=typeof o=="function"?"activate":o.behavior??"activate";(t[n]=t[n]??[]).push(o)}),t},Ro=(e,t,o=[])=>{let n=K(e).filter(l=>l.slice(0,2)==="__"),r=[...Object.values(Ce),...o.map(l=>typeof l=="function"?[]:l.properties.dependents).flat()];return t.filter(l=>{if(l&&typeof l=="object"){let p=l.name,{dependencies:c,dependents:f=[]}=l.properties,u=l.required||!c;if(!u&&c){let b=p?` (${p})`:"";if(f.find(y=>n.includes(y))){let y={};c.forEach(d=>y[d]=r.includes(d));let v=c.filter(d=>!r.includes(d));v.length&&console.warn(`The loader${b} for ${c.join(", ")} might be loaded too early, since we are missing the following dependencies: ${v.join(", ")}`),u=!0}}return u&&f&&r.push(...f),u}})};function Lt(e,t="main"){let{callbacks:o}=this;return o[t].push(e),!0}async function $o(e){let{callbacks:t,name:o}=this;if(!this.value){let n=o==="stop",s=e[i.isGraphScript],r=n?s.stop.initial:e[i[o]];this.value=!0,n||(s.stop.value=!1);let a=r&&!n?[...t.before,r,...t.main]:[...t.before,...t.main];for(let p of a)await p.call(e,e);let l=Array.from(e[i.isGraphScript].components.entries());await k(l.map(async([p,c])=>{let f=c[i.promise];return f&&typeof f.then=="function"&&(c=l[p]=await f),await c[i.isGraphScript][o].run()}));for(let p of t.after)await p.call(e,e);if(n){r&&r.call(e,e),s.flow.clear();let p=e[i.isGraphScript].path,c=e;for(;c[i.parent][i.isGraphScript]!==void 0;){let f=c[i.element][i.parent];if(f){if(c=f,c){let u=c[i.isGraphScript];u&&u.flow.clear(p)}}else break}s.start.value=!1}return!0}}function re(e,t=[],o){let n=o.parent,{parentObject:s,waitForChildren:r,toApply:a={},callbacks:l={},opts:p={},name:c=Symbol("root")}=o,f=e;if(e=Ke(e,a,p),e[ne])return e[ne];if(Array.isArray(e))return k(e.map(_=>re(_,t,o)));let u=typeof c=="symbol",b=_=>(p.loaders||(p.loaders=t),Ft(_,void 0,p)),S=n?.[i.isGraphScript].path,v=(S?[S,c]:typeof c=="string"?[c]:[]).join(p.keySeparator??A),d,g={symbol:Symbol("isGraphScript"),graph:u?c:n[i.isGraphScript].graph,options:p,original:f,states:{connected:!1},components:new Map,flow:new jt,create:b,path:v,stop:{name:"stop",value:!1,add:Lt,callbacks:{before:[],main:[],after:[]}},start:{name:"start",value:!1,add:Lt,callbacks:{before:[],main:[],after:[]}}},P=function(){$o.call(this,d)};g.start.run=P.bind(g.start),g.stop.run=P.bind(g.stop),e[i.isGraphScript]=g;let m=e[i.parent];!m&&n&&(m=e[i.parent]=n);let h=Go(t),x=Tt(h,{main:e,overrides:a,options:p,create:b},"load"),w=Tt(h,{main:x,overrides:a,options:p,create:b},"activate");return k(w,_=>{d=_;for(let F in _)if(typeof _[F]=="function"){let Y=_[F];_[F]=(...O)=>{let z=_[i.proxy]??_;return Y.call(z,...O)}}be(_,{[i.parent]:m},p),s&&(s[c]=_),u&&l.onRootCreated&&l.onRootCreated(c,_),l.onInstanceCreated&&l.onInstanceCreated(v,_);let E=()=>{l.onInstanceReady&&l.onInstanceReady(v,_)},N=_[i.isGraphScript],M=Be(_);if(M){let F=M.map(O=>{let z=Object.assign({},o),Pe=z.name=O.name;delete z.toApply,z.parentObject=O.parent,z.parent=_;let Qe=O.ref;if(Qe){let Xe=re(Qe,t,z);return Object.defineProperty(O.parent[Pe],i.promise,{value:Xe,writable:!1}),k(Xe,et=>(N.components.set(Pe,et),et))}else delete O.parent[Pe],console.error("No reference found for nested component",O)}),Y=k(F,O=>(E(),O));if(r)return k(Y,()=>_)}else E();N.stop.initial=d[i.stop],d[i.stop]=N.stop.run;let V=K(_);for(let F of V)if(F.includes(i.isGraphScript)){let O=Object.getOwnPropertyDescriptor(_,F);O?.enumerable&&Object.defineProperty(_,F,{...O,enumerable:!1})}return _})}var No=new oe,De=(e,t={},o={})=>{let n=vt(o),s={onRootCreated:(l,p)=>n.monitor.set(l,p,n.listeners),onInstanceCreated:(l,p)=>{if(n.listen!==!1){let c=p[i.listeners.value]??{},f=p[i.isGraphScript].flow;if(f.setInitialProperties(c,l,{id:p[i.isGraphScript].graph,monitor:n.monitor,options:n}),p[i.listeners.value]=c,i.trigger in p){Array.isArray(p[i.trigger])||(p[i.trigger]=[]);let u=p[i.trigger];f.onStart(()=>p.default(...u)),delete p[i.trigger]}}},onInstanceReady:(l,p)=>p[i.isGraphScript].flow.start()},r=n.loaders,a=re(e,r,{toApply:t,opts:n,callbacks:s,waitForChildren:!1});return k(a,l=>{let p=Array.isArray(l),c=p?l:[l];return c.map(f=>{if(f[i.parent]){let u=f[i.isGraphScript];if(u.start.value===!1)return k(u.start.run(),Mt)}else return f}),p?c:c[0]})},Ft=De;var Mt=k,Gt=T;var He={};I(He,{default:()=>Nt,name:()=>Vo,properties:()=>Zo,required:()=>Yo});var xe={};I(xe,{default:()=>Bo,define:()=>_e,name:()=>zo,properties:()=>Wo});var zo="define",Wo={dependents:[i.webcomponents],dependencies:[i.element,i.component,i.parent]},Bo=e=>{let t=e[i.webcomponents]??{};for(let o in t){let n=t[o],s=n[i.element];s.name&&s.extends&&_e(s,e,n)}return e},ge={},Rt=document.createElement;document.createElement=function(e,t){let o=ge[e];return o&&!o.autonomous?Rt.call(this,o.tag,{is:e}):Rt.call(this,e,t)};var Do={li:"LI",ol:"OL",ul:"UL",br:"BR",p:"Paragraph",textarea:"TextArea",a:"Anchor"},Ue=!1,_e=(e,t,o=t)=>{if(ge[e.name])console.log("Already created component...");else{let n=T(o),s=Ue?"":Do[e.extends]??e.extends[0].toUpperCase()+e.extends.slice(1),r=new Function(`

        class ESComponentBase extends HTML${s}Element { 
            #properties;
            constructor(properties={}){
                super()
               this.#properties = properties
            }
        }
        return ESComponentBase;

        `)();class a extends r{constructor(f){super(f);n[i.element]=this,t[i.isGraphScript].create(n)}connectedCallback(){let f=this[i.component],u=f[i.parent];f[i.parent]=u}disconnectedCallback(){console.log("Custom element removed from page.")}adoptedCallback(){console.log("Custom element moved to new page.")}attributeChangedCallback(f,u,b){console.log("Custom element attributes changed.",f,u,b)}}ge[e.name]={class:a,autonomous:Ue,tag:e.extends};let l=ge[e.name].class;Ue?customElements.define(e.name,l):customElements.define(e.name,l,{extends:e.extends})}};var Uo=(e="svg",t)=>document.createElementNS("http://www.w3.org/2000/svg",e,t);function Ho(e){return e?Array.isArray(e)?!e.reduce((o,n)=>o*(Se(n)?0:1),!0):Se(e):!1}function Se(e){if(e.__element||Ho(e.__compose))return!0;if(e.__)return qo(e.__.components)}function qo(e){e.forEach(t=>{if(Se(t))return!0})}var $t=(e,t)=>e[0]==="svg"||t&&t.__element instanceof SVGElement?Uo(...e):document.createElement(...e),Jo=`__bound${i.editor}s`,Vo="element",Yo=!0,Zo={dependents:[i.element,i.attributes,i.resize,i.resolved,i.childPosition,i.editor,i.component,i.attribute,i.connected],dependencies:[i.parent,i.isGraphScript,i.proxy]};function Nt(e,t,o={}){let n=e[i.isGraphScript],s=n.states,r=n.path.split(o.keySeparator).slice(-1)[0],a=e[i.parent],l=e[i.element],p=e[i.attributes],c;if(!(l instanceof Element)){let h=p&&Object.keys(p).length||Se(e)?"div":"link";if(l&&typeof l=="object"&&l.name&&l.extends){let _=l,E=e[i.element];_e(E,e),console.log("Defining a custom element",_.name,_.extends),e[i.element]=l=_.name}l===void 0?l=h:Array.isArray(l)?l=$t(l,a):typeof l=="object"&&(c=l,c.selectors?l=document.querySelector(c.selectors):c.id?l=document.getElementById(c.id):l=h),typeof l=="string"&&(l=$t([l],a));let w=Symbol("no input to the default function");e.hasOwnProperty("default")||(e.default=function(_=w){return _!==w&&(this[i.element].innerText=_),this[i.element]})}if(!(l instanceof Element))throw new Error("Element not created for "+r);let f=s||{};f.element=l,f.attributes=p,a instanceof Element?f.parentNode=a:f.parentNode=a?.[i.element]instanceof Element?a[i.element]:l.parentNode,f.onresize=e[i.resize],f.onresizeEventCallback=void 0;let u=f;typeof r!="string"&&(r=`${l.tagName??"element"}${Math.floor(Math.random()*1e15)}`),l.id||(l.id=r);let b,S;Object.defineProperty(e,`${i.connected}`,{value:new Promise(m=>b=async()=>{Object.defineProperty(e,`__${i.connected}`,{value:!0}),m(!0)})}),Object.defineProperty(e,`${i.resolved}`,{value:new Promise(m=>S=async()=>{m(!0)})}),Object.defineProperty(e,`__${i.connected}`,{value:b,writable:!0}),Object.defineProperty(e,`__${i.resolved}`,{value:S});let y=(m,h)=>m.slice(0,2)==="on"&&typeof h=="function",v=(m,h,x)=>!y(m,h)&&typeof h=="function"?h.call(x):h,d=m=>{if(e[i.element]instanceof Element)for(let h in m)if(h==="style")for(let x in m.style)e[i.element].style[x]=v(h,m.style[x],e);else{let x=m[h];if(y(h,x)){let w=x;e[i.element][h]=(..._)=>{let E=e[i.proxy]??e;return w.call(E??e,..._)}}else{let w=v(h,x,e);e[i.element].setAttribute(h,w);try{e[i.element][h]=w}catch{}}}};Object.defineProperty(e,i.attributes,{get:()=>u.attributes,set:m=>{u.attributes=m,u.attributes&&d(u.attributes)}}),Object.defineProperty(e,i.element,{get:function(){if(u.element instanceof Element)return u.element},set:function(m){if(m instanceof HTMLElement){u.element!==m&&(u.element.insertAdjacentElement("afterend",m),u.element.remove()),u.element=m;let h=e[i.isGraphScript];if(h){let x=h.components;for(let w in x){let _=x[w];_&&_[i.isGraphScript]&&k(_,E=>E[i.parent]=m)}}d(u.attributes)}}}),Object.defineProperty(e,i.parent,{get:function(){let m=e[i.element].parentNode;return m&&m.hasAttribute(i.attribute)?m[i.component]:{[i.element]:m}},set:m=>{if(typeof m=="string"){let x=document.querySelector(m);x?m=x:m=document.getElementById(m)}m?.__node?.ref&&(m=m.__node.ref),m?.[i.element]instanceof Element&&(m=m[i.element]);let h=e[i.element].parentNode;if(h!==m)if(e[i.element]instanceof Element){if(h&&e[i.element].remove(),m instanceof Element){let x=e[i.childPosition],w=m.children.length,_=e[i.element],E=e[`__${i.editor}`];E&&(_=E);let N=x!==void 0&&x<w,M=m.children.length,V=M&&x!==void 0?m.children[x]??m.children[M-1]:void 0;if(V){let O=V[i.component][i.childPosition]<x?"afterend":"beforebegin";V.insertAdjacentElement(O,_)}else m.appendChild(_);E&&E.setComponent(e)}}else console.error("No element was created for this Component...",e);if(m instanceof HTMLElement){be(e,{[i.parent]:m,[i.isGraphScript]:{path:r}},o);let x=e[`__${i.connected}`],w=x instanceof Function;e[i.isGraphScript].start.run(),w&&x()}}});let g=e[i.resize];Object.defineProperty(e,i.resize,{get:function(){return g},set:function(m){u.onresize=m,u.onresizeEventCallback&&window.removeEventListener("resize",u.onresizeEventCallback),u.onresize&&(u.onresizeEventCallback=h=>{if(u.onresize&&e[i.element]instanceof Element){let x=e[i.proxy]??e;return m.call(x,h)}},window.addEventListener("resize",u.onresizeEventCallback))}});let P=o?.utilities;if(P&&e[i.editor]){let m=e[i.editor],h=P.code?.class;if(h||(typeof m=="function"?h=m:console.error("Editor class not provided in options.utilities.code")),h){let x=P.code?.options??{};x=typeof m=="boolean"?x:{...x,...m};let w=x.bind,_=new h(x);if(_.start(),Object.defineProperty(e,`__${i.editor}`,{value:_}),w!==void 0){let E=e;w.split("/").forEach(M=>{if(M==="..")E=E[i.isGraphScript].states.parentNode[i.component];else{if(M===".")return;E=E[M]}});let N=Jo;E[N]?E[N].push(_):Object.defineProperty(E,N,{value:[_]})}}}return e[i.element][i.component]=e,e[i.element].setAttribute(i.attribute,""),e[i.element]=e[i.element],n.start.add(()=>{e[i.resize]=u.onresize,u.parentNode&&(e[i.parent]=u.parentNode)},"before"),n.stop.add(()=>{e[i.element].remove();let m=`${i.editor}Attached`;e[m]&&e[m].remove()}),e}var Je={};I(Je,{default:()=>tn,name:()=>Qo,properties:()=>en,required:()=>Xo});var Qo="start",Xo=!0,en={dependents:[i.source],dependencies:[U,i.isGraphScript,i.editor,i.parent,i.proxy,i.connected,i.promise,i.resolved]},tn=e=>{e[i.isGraphScript].start.add(()=>on(e))},qe=(e,t)=>e[i.isGraphScript].start.value=t;function on(e,t=[],o){let n;return e[i.isGraphScript].options.await?(n=Kt.call(e,async()=>{o&&await o(),zt.call(e,t),qe(e,!0)}),qe(e,n)):(Kt.call(e,o),n=zt.call(e,t),qe(e,!0)),n}async function Kt(e){await this[i.connected];let t=this[i.isGraphScript].states;t.connected=!0;let o=`__bound${i.editor}s`,n=this[o];return n&&n.forEach(s=>s.setComponent(this)),this[`__${i.resolved}`](),e&&await e(),this}function zt(e=[]){let t=`__${i.editor}`,o=this[i.parent]?.[t];o&&Object.defineProperty(this,t,{value:o});let n=this[U];if(n){typeof n=="function"&&(n=this[i.source]=n()),delete this[U];let s=this[i.isGraphScript].path;this[t]&&this[t].addFile(s,n)}return e.forEach(s=>s.call(this)),this}var Ye={};I(Ye,{default:()=>Wt,name:()=>nn,properties:()=>sn});var $={},nn="animate",Ve=i.animate,sn={dependents:[i.animate]};function Wt(e){if(e[Ve]){let t=e[Ve],o=Math.random(),n=typeof t=="number"?t:"global",s;if($[n])s=()=>{e.default(),$[n].objects[o]=e};else{let r=$[n]={objects:{[o]:e}},a=r.objects,l=()=>{for(let p in a)a[p].default()};if(n==="global"){let p=()=>{l(),r.id=window.requestAnimationFrame(p)};s=p,$[n].stop=()=>{window.cancelAnimationFrame(r.id),r.cancel=!0}}else s=()=>{l(),r.id=setInterval(()=>l(),1e3/n)},$[n].stop=()=>clearInterval(r.id)}e[i.isGraphScript].start.add(s),e[i.isGraphScript].stop.add(()=>{delete $[n].objects[o],e[Ve]=t,Object.keys($[n].objects).length===0&&($[n].stop(),delete $[n])})}}var J=[];J.push(Ne);R||J.push(He,xe);J.push(Je);J.push(Ye);var Bt=Gt;var Dt=(e,t,o={})=>(o.loaders?o.loaders=Array.from(new Set([...o.loaders,...J])):o.loaders=J,De(e,t,o));var an=e=>{let t=document.getElementById(e);t?t.scrollIntoView({}):console.error(`No component found for path: ${e}`)},ln=!1,Ze=class{constructor(t){this.paths={};this.set=(t,o)=>{o===void 0?delete this.paths[t]:this.paths[t]=o};this.setRoot=t=>this.set("",t);this.get=(t=this.getPath())=>{let o=this.paths;return t.split(/\.|\//).forEach(n=>o=o[n]??o[""][n]),o};this.load=(t,o,n=!0)=>{let s=t===void 0?this.getPath():t,r=this.get(s);r&&o&&o.preventDefault();let a=!r&&(!this.loaded||this.loaded.path!=="")&&n;if(a&&(s="",r=this.get("")),r){let l=this.options.element.root,p=s?this.options.element.target:void 0;if(p){(!this.loaded||this.loaded.path!==""&&s!=="")&&this.load(""),typeof p=="string"?l=document.querySelector(p):l=p;let u=[...l.children];if(l)for(let b of u)b.remove()}else this.loaded&&this.loaded.ref.__element.remove();let c=Bt(r),f=Dt(c,{__parent:l});return s===""&&(this.root&&this.root.__element.remove(),this.root=f),this.loaded={path:s,ref:f},p&&window.scrollTo(0,0),this.loaded}else an(s);a&&this.navigate(void 0,void 0,!1)};this.navigate=(t=this.getPath(),o,n=!1)=>{let s=t.split(/\.|\//).join(this.options.spa?"/":".");history.pushState({},"escodeRouterURL",this.options.spa?`${window.location.origin}/${s}`:`${window.location.origin}#${s}`),this.load(s,o,n)};this.getPath=t=>(t===void 0&&(this.options.spa&&(t=window.location.pathname.slice(1)),t||(t=window.location.hash.slice(1))),t??"");t=Object.assign({},t),t.element||(t.element={root:document.body}),(typeof t.element!="object"||!("root"in t.element))&&(t.element={root:t.element}),this.options=t,window.addEventListener("beforeunload",o=>this.load(void 0,o)),window.addEventListener("popstate",o=>this.load(void 0,o)),window.addEventListener("DOMContentLoaded",o=>{ln=!0,(!this.loaded||this.loaded.path==="")&&this.load(void 0,o)})}},Ut=Ze;var ve=new Ut({spa:!0,element:{root:document.body,target:"#content"}});ve.setRoot(Ee);ve.set("about",ke);ve.set("work",Oe);ve.load();
//# sourceMappingURL=index.esm.js.map
