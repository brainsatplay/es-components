var Zt=Object.defineProperty;var k=(t,e)=>{for(var n in e)Zt(t,n,{get:e[n],enumerable:!0})};var ke={};k(ke,{content:()=>pn,footer:()=>un,nav:()=>fn});var le={};k(le,{__onconnected:()=>Qt,container:()=>en});function Qt(){this.header!==void 0&&(this.container.header.__element.innerText=this.header),this.text!==void 0&&(this.container.text.__element.innerHTML=this.text)}var en={header:{__element:"h3",__attributes:{innerText:"Header"}},text:{__element:"p",__attributes:{innerHTML:"This is the text."}}};var Q={};k(Q,{__attributes:()=>nn,__onconnected:()=>tn,container:()=>on});function tn(){["number","title","description"].forEach(e=>{this[e]!==void 0&&(this.container[e].__element.innerText=this[e])}),this.projects!==void 0&&this.projects.forEach(e=>{let n=document.createElement("li"),o=document.createElement("a"),s=document.createElement("sub");s.style.fontSize="75%",s.style.userSelect="none",e.active===!1?(n.style.opacity="0.5",n.style.pointerEvents="none",n.style.userSelect="none"):(e.oncreate&&e.oncreate(n),e.onclick?o.onclick=e.onclick:e.href&&(o.href=e.href)),n.appendChild(o),n.appendChild(s),o.innerText=e.name,s.innerText=` ${e.version}`,this.container.projects.__element.appendChild(n)})}var nn={style:{padding:"1rem"}},on={number:{__element:"p",__attributes:{innerText:"",style:{fontSize:"0.9rem",paddingBottom:"0.5rem",margin:"0px"}}},title:{__element:"h3",__attributes:{innerText:"Feature"}},description:{__element:"p",__attributes:{innerText:"This is a feature that is featured."}},projects:{__element:"ul"}};var Ee={};k(Ee,{__element:()=>ln,__onconnected:()=>cn,channel:()=>sn,height:()=>an,width:()=>rn});var sn="brainsatplay",rn="100%",an=480,ln="div",cn=function(){let t=document.createElement("script");t.src="https://embed.twitch.tv/embed/v1.js",document.body.appendChild(t),t.onload=()=>{new Twitch.Embed(this.__element,{width:this.width,height:this.height,channel:this.channel})}};var ot={borderBottom:"2px solid white",paddingBottom:"0.5rem",paddingRight:"1rem"},st={list:[],__element:"ul",__onconnected:function(){this.__element.innerHTML="",this.list.forEach(t=>{let e=document.createElement("li"),n=document.createElement("a");n.innerText=t.label,e.appendChild(n),this.__element.appendChild(e),t.oncreate&&t.oncreate(e),t.onclick?n.onclick=t.onclick:n.href=t.href})}},it=[{label:"Home",href:"/"},{label:"About",href:"#about"},{label:"Work",href:"#work"},{label:"Ethos",href:"#ethos"},{label:"Twitch",href:"#twitch"}],fn={__element:"nav",__childposition:0,__attributes:{style:{position:"fixed",top:"0px",right:"0px",paddingRight:"2rem"}},list:{list:it,__compose:st,__attributes:{style:{textTransform:"uppercase"}}}},pn={__element:"main",__childposition:0,hero:{__element:"section",__childposition:0,container:{title:{__element:"h1",__attributes:{innerText:"Brains@Play"}},subtitle:{__element:"h2",__attributes:{innerText:"The Universal Web Development Cooperative"}},description:{__element:"p",__attributes:{innerText:"We empower everyone to build better apps\u2014together."}}}},about:{__element:"section",__childposition:1,__attributes:{style:{background:"darkslategray"}},container:{title:{text:{__element:"h2",__attributes:{innerText:"About Us"}},support:{__element:"a",__attributes:{href:"https://opencollective.com/brainsatplay",target:"_blank"},image:{__element:"img",__attributes:{height:40,src:"https://opencollective.com/brainsatplay/contribute/button@2x.png?color=white"}}},__attributes:{style:{display:"flex",justifyContent:"space-between",alignItems:"center",...ot}}},description:{__element:"p",__attributes:{innerHTML:"Brains@Play is currently led by two developers\u2014<a href='https://github.com/garrettmflynn' target='_blank'>Garrett Flynn</a> and <a href='https://github.com/garrettmflynn' target='_blank'>Joshua Brewster</a>\u2014working to build a better Web with free software."}},statements:{__attributes:{style:{display:"flex",flexWrap:"wrap"}},mission:{header:"Mission",text:"Make code universally <a>shareable</a>, <a>modifiable</a>, and <a>usable</a>.",__compose:le,__attributes:{style:{flexBasis:"50%",padding:"15px"}}},vision:{header:"Vision",text:"Engulf the Web in public experiments of communal organization and citizen science, engineering, and art.",__compose:le,__attributes:{style:{flexBasis:"50%",padding:"15px"}}}}}},ethos:{__element:"section",__childposition:2,container:{title:{__element:"h2",__attributes:{innerText:"Our Ethos",style:{...ot}}},featureone:{number:"1",title:"Recompose the Web",description:"We are consuming the infrastructure of the Web.",projects:[{name:"ES Components (ESC)",link:"https://github.com/brainsatplay/escomponent",version:"0.1.7",description:"A specification for composable JavaScript objects with concurrent message-passing."},{name:"ESCode",link:"https://github.com/brainsatplay/escode",version:"0.1.7",description:"A framework for using ES Components using graphscript."},{name:"Web Source Accessibility Guidelines (WSAG)",active:!1,version:"0.0.0",description:"Identify best practices to allow anyone to use, modify, and share Web Components."}],__compose:Q},featuretwo:{number:"2",title:"Make Software Yours",description:"Bring yourself to every page.",projects:[{name:"Browser Extension",link:"https://github.com/brainsatplay/brainsatplay-extension",version:"0.0.0",oncreate:t=>{let e="brainsatplay-injection-proxy",n=s=>{window.postMessage({source:s,command:"openOptions"})},o=()=>{let s=!1;t.onclick=()=>{let r="https://github.com/brainsatplay/brainsatplay-extension";window.open(r,"_blank")};let i=document.getElementById(e);if(i&&i.getAttribute("data-version")){let a=i.getAttribute("data-id");s=!0,t.onclick=()=>n(a)}return s};window.onload=function(){o()||setTimeout(o,100)}},description:"Apply components across web pages."},{name:"Desktop App",link:"https://github.com/brainsatplay/brainsatplay-electron",version:"0.0.0",onclick:()=>{customProtocolCheck("brainsatplay://",()=>{window.open("https://github.com/brainsatplay/brainsatplay-desktop","_blank"),console.log("Custom protocol not found.")},()=>{console.log("Custom protocol found and opened the file successfully.")})},description:"Create composable cross-platform web systems."}],__compose:Q},featurethree:{number:"3",title:"Free Public Experimentation",description:"We are supporting new scientific and human-computer interaction (HCI) advances that drive experimentation on the Web and translate quickly across sites.",projects:[{name:"WebNWB",link:"https://github.com/brainsatplay/webnwb",description:"Enable citizen neuroscience.",version:"0.0.12"},{name:"MyAlyce",link:"https://myalyce.com",description:"Enable citizen neuroscience.",version:"0.0.0"}],__compose:Q}}},twitch:Ee},un={__element:"footer",__childposition:2,__attributes:{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",backgroundColor:"black",color:"white",padding:"25px 50px"}},title:{text:{__element:"span",__attributes:{innerText:"\xA9 Brains@Play 2022"}}},links:{__compose:st,list:[...it]},social:{__element:"ul",email:{__element:"li",link:{__element:"a",__attributes:{href:"mailto:contact@brainsatplay.com",innerText:"contact@brainsatplay.com"}}},newsletter:{__element:"li",link:{__element:"a",__attributes:{href:"https://brainsatplay.substack.com",innerText:"Sign up for our newsletter",style:{fontSize:"0.8rem"}}}}}};var Ce={};k(Ce,{hero:()=>dn});var dn={__element:"section",container:{title:{__element:"h1",__childposition:0,__attributes:{innerText:"About Us"}},subtitle:{__element:"h2",__childposition:1,__attributes:{innerText:"It all began with a dream of agency for every brain."}},description:{__element:"p",__childposition:2,__attributes:{innerText:"We started working in 2021 and never stopped."}},message:{__element:"p",__childposition:3,__attributes:{innerText:"Now it's cool to have a brain!"}}}};var je={};k(je,{hero:()=>hn});var hn={__element:"section",container:{title:{__element:"h1",__attributes:{innerText:"Our Work"}},subtitle:{__element:"h2",__attributes:{innerText:"The Universal Web Development Cooperative"}}}};var _n="[object Module]",K=t=>!!(t&&(!!Object.keys(t).reduce((n,o)=>{let s=Object.getOwnPropertyDescriptor(t,o),i=s&&s.get&&!s.set?1:0;return n+i},0)||Object.prototype.toString.call(t)===_n));var at=(t,e)=>{if(t&&typeof t=="object"&&e&&typeof e=="object"){let n=JSON.stringify(t),o=JSON.stringify(e);return n===o}else return t===e},z=(t,e)=>Promise.all(Object.getOwnPropertySymbols(t).map(n=>e(n,t[n]))),C=(t,e)=>{let n=e.path[t];if(!n)throw new Error("Invalid Path Type");return n.filter(s=>typeof s=="string").join(e.keySeparator)},ce=(t,e)=>{let n=t;return typeof t=="string"?n=t.split(e.keySeparator):typeof t=="symbol"&&(n=[t]),{id:n[0],path:n.slice(1)}},M=(t,e,n,o,s=!0)=>{if(t instanceof Function&&(o&&typeof o=="object"&&typeof o.then=="function"?o.then(i=>t(e,n,i)):t(e,n,o)),s&&globalThis.ESMonitorState){let i=globalThis.ESMonitorState.callback;globalThis.ESMonitorState.state[e]={output:o,value:n},M(i,e,n,o,!1)}};var mn=60,ee=class{constructor(e,n){this.listeners={};this.setOptions=(e={})=>{for(let n in e)this[n]=e[n]};this.add=e=>{let n=e.sub;return this.listeners[n]=e,this.start(),!0};this.get=e=>this.listeners[e];this.remove=e=>{delete this.listeners[e],Object.keys(this.listeners).length||this.stop()};this.poll=e=>{z(e,(n,o)=>{let{callback:s,current:i,history:r}=o;o.path.resolved||(o.path.resolved=C("output",o)),at(i,r)||(M(s,o.path.resolved,{},i),typeof i=="object"?Array.isArray(i)?r=[...i]:r={...i}:e[n].history=i)})};this.start=(e=this.listeners)=>{this.sps?this.#e||(console.warn("[escode]: Starting Polling!"),this.#e=setInterval(()=>this.poll(e),1e3/this.sps)):this.sps=mn};this.stop=()=>{this.#e&&(console.warn("[escode]: Stopped Polling!"),clearInterval(this.#e),this.#e=void 0)};e&&(this.listeners=e),n&&(this.sps=n)}#e;#t;get sps(){return this.#t}set sps(e){this.#t=e;let n=this.listeners;Object.keys(n).length&&(this.stop(),this.start())}};var ne={};k(ne,{functionExecution:()=>he,functions:()=>mt,getProxyFunction:()=>Me,info:()=>me,register:()=>ht,set:()=>Le,setterExecution:()=>de,setters:()=>Ne});globalThis.ESMonitorState={state:{},callback:void 0,info:{}};var ct=globalThis.ESMonitorState;var yn=async(t,e)=>{let n=globalThis.performance.now(),o=await t(...e),s=globalThis.performance.now();return{output:o,value:s-n}},ft={performance:yn},pt=(t,e,n)=>{let o={value:{},output:void 0},s={...ct.info,...n};for(let i in s)if(s[i]&&ft[i]){let r=t;t=async(...a)=>{let c=await ft[i](r,a);return o.value[i]=c.value,c.output}}return o.output=t(...e),o};var j=Symbol("isProxy"),te=Symbol("fromInspectable"),Lo=Symbol("fromInspectableHandler");var T=".",gn="default",U="__esmpileSourceBundle",Te={isGraphScript:"__",properties:"__props",default:gn,parent:"__parent",promise:"__childresolved",component:"__component",proxy:"__proxy"},l={...Te,start:"__onconnected",stop:"__ondisconnected",connected:"__connected",resolved:"__resolved",started:"__started",element:"__element",webcomponents:"__define",attributes:"__attributes",listeners:{value:"__listeners",branch:"__branch",bind:"__bind",trigger:"__trigger",format:"__format"},trigger:"__trigger",compose:"__compose",apply:"__apply",uri:"src",reference:"ref",childPosition:"__childposition",attribute:"escomponent",options:"__options",source:"__source",path:"__path",animate:"__animate",states:"__states",editor:"__editor",original:"__original",resize:"__onresize"};var ut=(t,e)=>t in e,Sn=(t,e,n)=>{let o=e[t[0]];if(o){let s=o[t.slice(1).join(n)];if(s)return s}},fe=(t,e,n={})=>{let o=n.fallbacks??[],s=n.keySeparator??T;if(n.shortcuts){let c=Sn(e,n.shortcuts,s);if(c)return n.output==="info"?{value:c,exists:!0,shortcut:!0}:c}typeof e=="string"?e=e.split(s).flat():typeof e=="symbol"&&(e=[e]);let i;e=[...e],e=e.map(c=>typeof c=="string"?c.split(s):c).flat();let r=t,a=[r];for(let c=0;c<e.length;c++)if(r){let f=e[c];i=ut(f,r),i?r=r[f]:(r=void 0,i=!0),a.push(r)}return n.output==="info"?{value:r,exists:i,parent:a[a.length-2]}:r},pe=(t,e,n,o={})=>{let s=o?.create??!1,i=o?.keySeparator??T;typeof t=="string"?t=t.split(i):typeof t=="symbol"&&(t=[t]),t=[...t];let r=[...t],a=r.pop();for(let c=0;c<r.length;c++){let f=r[c],p=ut(f,n);s&&!p&&(n[f]={},p=!0),p&&(n=n[f])}return n[a]=e,!0};var Ge={};k(Ge,{functions:()=>vn,objects:()=>Ie});function xn(t,e){let n=this,o=this.target;if(!this.parent){let s=o[t];try{Object.defineProperty(o,t,{get:()=>s,set:function(i){s=i,n.proxy[t]={[j]:this[j],[te]:!0,value:i}},enumerable:!0,configurable:!0})}catch{console.error(`Could not reassign ${t} to a top-level setter...`)}}e&&this.newKeys.add(t),this.create(t,o,void 0,!0)}var ue=xn;var vn=function(){let t=this;return{apply:async function(e,n,o){try{let s=e;o[0]?.[te]&&(s=o[0].value,o=o.slice(1));let r=t.listeners.functions,a=t.path.join(t.options.keySeparator),c=r?r[a]:void 0,f,p={};c?(p=he(n,c,s,o),f=p.output):(f=s.apply(n,o),p=t?.state?.[a]?.value??{});let u=t.options.callback;return M(u,a,p,f),f}catch(s){console.warn("Function failed:",s,t.path)}}}},Ie=function(){let t=this;return{get(e,n,o){return n===j?!0:Reflect.get(e,n,o)},set(e,n,o,s){if(n===j)return!0;let i=[...t.path,n].join(t.options.keySeparator),r=o?.[j],a=o?.[te];a&&(o=o.value);let c=t.listeners.setters,f=Object.getOwnPropertyDescriptor(e,n);if(f&&!f.get&&!f.set&&typeof t.options.globalCallback=="function"){let _=t.path[0];ue.call(t,n,!0),Le("setters",i,o,t.options.globalCallback,{[_]:t.root},t.listeners,t.options)}if(o||typeof o=="function"){let _=t.create(n,e,o);_&&(o=_)}let u=!r;if(c&&u&&!t.newKeys.has(n)){let _=c[i];_&&de(_,o)}let m=t.options.callback,v=t?.state?.[i]?.value??{};return M(m,i,v,o),a||!u?!0:Reflect.set(e,n,o,s)}}};var R=typeof process=="object";var On=(t,e,n)=>{try{n===void 0&&(n=t[e])}catch(f){return f}if(t[e]&&t[e][j])return!1;let s=typeof n,i=s==="object",r=s=="function";if(!n||!(i||r)||!R&&n instanceof Element||n instanceof EventTarget)return!1;let c=i&&K(n);if(r)return!0;{let f=Object.getOwnPropertyDescriptor(t,e);if(f&&(f.value&&f.writable||f.set)){if(!c)return!0}else if(!t.hasOwnProperty(e))return!0}return!1},W=class{constructor(e={},n={},o,s){this.path=[];this.listeners={};this.newKeys=new Set;this.state={};this.set=(e,n,o)=>{this.state[e]={output:o,value:n},pe(e,o,this.proxy,{create:!0})};this.check=On;this.create=(e,n,o,s=!1)=>{let i=this.check(n,e,o);if(o===void 0&&(o=n[e]),i&&!(i instanceof Error))return n[e]=new W(o,this.options,e,this),n[e];if(s)try{this.proxy[e]=o??n[e]}catch(r){let a=K(n),c=[...this.path,e];console.error(`Could not set value (${c.join(this.options.keySeparator)})${a?" because the parent is an ESM.":""}`,a?"":r)}};if(n.pathFormat||(n.pathFormat="relative"),n.keySeparator||(n.keySeparator=T),e.__proxy)this.proxy=e.__proxy;else if(e[j])this.proxy=e;else{this.target=e,this.options=n,this.parent=s,this.parent?(this.root=this.parent.root,this.path=[...this.parent.path],this.state=this.parent.state??{}):this.root=e,o&&this.path.push(o),this.options.listeners&&(this.listeners=this.options.listeners),this.options.path&&(this.options.path instanceof Function?this.path=this.options.path(this.path):Array.isArray(this.options.path)?this.path=this.options.path:console.log("Invalid path",this.options.path)),this.path&&(this.path=this.path.filter(a=>typeof a=="string")),this.options.keySeparator||(this.options.keySeparator=T);let i=this.options.type;i!="object"&&(i=typeof e=="function"?"function":"object");let r=Ge[`${i}s`].call(this);i==="function"&&(r={...r,...Ie.call(this)}),this.proxy=new Proxy(e,r),Object.defineProperty(e,"__proxy",{value:this.proxy,enumerable:!1}),Object.defineProperty(e,"__esInspectable",{value:this,enumerable:!1});for(let a in e)ue.call(this,a)}return this.proxy}};var _e=(t,e,n,o)=>{let s=o.reference,i=Array.isArray(t)?t[0]:typeof t=="string"?t.split(n.keySeparator)[0]:t,r=o.hasOwnProperty("static")?!o.static:!1;r&&!globalThis.Proxy&&(r=!1,console.warn("Falling back to using function interception and setters...")),r&&(e=new W(e,{pathFormat:n.pathFormat,keySeparator:n.keySeparator,listeners:o.listeners,path:c=>c.filter(f=>!n.fallbacks||!n.fallbacks.includes(f))},i));let a={keySeparator:n.keySeparator,...o};return pe(t,e,s,a),e};var me=(t,e,n,o,s,i,r,a={})=>{typeof n=="string"&&(n=n.split(r.keySeparator));let c=n.join(r.keySeparator),f=s,p=a.ref,u=a.path,m=h=>fe(p??s,h,{keySeparator:r.keySeparator,fallbacks:r.fallbacks}),v=(h,y)=>{_e(h,y,r,{reference:p??s,listeners:i})},_=r.onUpdate,S={};_&&typeof _=="object"&&_.callback instanceof Function&&(S=_.info??{},_=_.callback);let b=[t,...n],g={absolute:b,relative:c.split(r.keySeparator),parent:b.slice(0,-1)};g.output=g[r.pathFormat];let d={id:t,path:g,keySeparator:r.keySeparator,infoToOutput:S,callback:(...h)=>{let y=e(...h);return _ instanceof Function&&_(...h),y},get current(){return m(u??d.path.absolute)},set current(h){v(u??d.path.absolute,h)},get parent(){return m(u?u?.slice(0,-1):d.path.parent)},get reference(){return f[t]},set reference(h){f[t]=h},original:o,history:typeof o=="object"?Object.assign({},o):o,sub:Symbol("subscription"),last:n.slice(-1)[0]};return d},dt=(t,e,n)=>{if(n){let o=Math.random();n.symbol[e]={name:t,id:o},n.name[t]||(n.name[t]={}),n.name[t][o]=e}},ht=(t,e,n)=>{let o=C("absolute",t);return e[o]||(e[o]={}),e[o][t.sub]=t,dt(o,t.sub,n),!0},Fe={functions:mt,setters:Ne},Le=(t,e,n,o,s,i,r)=>{let{id:a,path:c}=ce(e,r),f=me(a,o,c,n,s,Fe,r);if(Fe[t])Fe[t](f,i,i.lookup);else{let p=C("absolute",f);i[t][p][f.sub]=f,i.lookup&&dt(p,f.sub,i.lookup)}},Pn=(t,e)=>e[C("absolute",t)],_t=(t,e,n,o)=>{let s=!!Pn(t,e);if(!s){let i=t.parent,r=i?.[t.last];s=n(r,i)}return ht(t,e,o)},de=(t,e)=>z(t,(n,o)=>{let s=C("output",o);M(o.callback,s,{},e)});function Ne(t,e,n){let o=this;return _t(t,e.setters,(s,i)=>{let r=s;if(!!i&&!i[j]){let a=!0;try{delete i[t.last]}catch{console.error("Unable to redeclare setters. May already be a dynamic object..."),a=!1}if(a){let c=t.last.slice(0,2)==="__"||t.last==="default";try{Object.defineProperty(i,t.last,{get:()=>r,set:async f=>{let p=typeof r=="function";if(r=f,p)r=Me.call(o,t,e,r);else{let u=Object.assign({},e.setters[C("absolute",t)]);de(u,f)}},enumerable:!c,configurable:!0})}catch(f){throw f}}}},n)}function Me(t,e,n){return function(...o){let s=e.functions[C("absolute",t)];return he(this,s,n??t.original,o).output}}var he=(t,e,n,o)=>{e=Object.assign({},e);let s=Object.getOwnPropertySymbols(e),i=e[s[0]]??{},r=pt((...a)=>n.call(t,...a),o,i.infoToOutput);return z(e,(a,c)=>{let f=C("output",c);M(c.callback,f,r.value,r.output)}),r};function mt(t,e,n){return _t(t,e.functions,(o,s)=>{if(!s[j])return s[t.last]=Me.call(this,t,e),Ne(t,e,n)},n)}var F=Symbol("abort"),yt=(t,e=[])=>({typeof:typeof t,name:t?.constructor?.name,simple:!0,object:t&&typeof t=="object",path:e}),H=(t,e,n={})=>{let o=n.accumulator;o||(o=n.accumulator={});let s=n.ignore||[],i=n.path||[],r=n.condition||!0,a=[],c=[],f=(p,u={},m)=>{let v=m.path;if(v.length===0&&!(r instanceof Function?r(void 0,p,{...yt(p,v)}):r))return p;for(let _ in p){if(n.abort)return;if(s.includes(_))continue;let S=p[_],b=[...v,_],g=yt(S,b);if(g.object){let x=g.name;if(K(S)||x==="Object"||x==="Array"){g.simple=!0;let h=a.indexOf(S);if(h!==-1)u[_]=c[h];else{a.push(S);let y=r instanceof Function?r(_,S,g):r;g.pass=y;let O=e(_,S,g);if(O===F)return F;if(u[_]=O,y){c.push(u[_]);let w=f(S,u[_],{...m,path:b});if(w===F)return F;u[_]=w}}}else{g.simple=!1;let h=e(_,S,g);if(h===F)return F;u[_]=h}}else{let x=e(_,S,g);if(x===F)return F;u[_]=x}}return u};return f(t,o,{path:i})};var bt=()=>({symbol:{},name:{}}),wn=typeof process=="object",oe=class{constructor(e={}){this.poller=new ee;this.options={pathFormat:"relative",keySeparator:T};this.listeners={polling:this.poller.listeners,functions:{},setters:{},lookup:bt()};this.references={};this.get=(e,n,o=this.references)=>fe(o,e,{keySeparator:this.options.keySeparator,fallbacks:this.options.fallbacks,output:n});this.set=(e,n,o={})=>{let s={...o};return s.reference||(s.reference=this.references),s.listeners||(s.listeners=this.listeners),_e(e,n,this.options,s)};this.on=(e,n)=>{let o=ce(e,this.options);return this.listen(o.id,n,o.path)};this.getInfo=(e,n,o,s)=>{let i=me(e,n,o,s,this.references,this.listeners,this.options),r=Math.random(),a=this.listeners.lookup,c=C("absolute",i);return a.symbol[i.sub]={name:c,id:r},a.name[c]||(a.name[c]={}),a.name[c][r]=i.sub,i};this.listen=(e,n,o=[],s={})=>{typeof o=="string"?o=o.split(this.options.keySeparator):typeof o=="symbol"&&(o=[o]);let i=o,r=this.get(e);if(!r){console.error("Reference does not exist.",e);return}s.poll||(s.poll=K(r)),s.seen||(s.seen=[]);let a=s,c=[e,...i],f=this.get(c),p=(S,b=!1)=>!(S&&typeof S=="object")||!wn&&S instanceof Element?!1:b?!0:!Array.isArray(S),u={},m=!1;p(f,!0)&&(f.__esInspectable&&(f.__esInspectable.options.globalCallback=n),H(f,(S,b,g)=>{if(!g.pass){let x=[...i,...g.path],d=this.listen(e,n,x,a);Object.assign(u,d)}},{condition:(S,b)=>p(b)}),m=!0);let _;try{if(_=this.getInfo(e,n,i,f),_&&!m)if(a.poll)m=this.poller.add(_);else{let S="setters";typeof f=="function"&&(S="functions"),m=this.add(S,_)}}catch(S){console.error("Fallback to polling:",o,S),m=this.poller.add(_)}if(m){if(u[C("absolute",_)]=_.sub,this.options.onInit instanceof Function){let S={};for(let b in _.infoToOutput)S[b]=void 0;this.options.onInit(C("output",_),S)}return u}else{console.error("Failed to subscribe to:",o);return}};this.add=(e,n)=>ne[e]?ne[e](n,this.listeners,this.listeners.lookup):(this.listeners[e][C("absolute",n)][n.sub]=n,!0);this.remove=e=>{e||(e={...this.listeners.functions,...this.listeners.setters,...this.listeners.polling}),typeof e!="object"&&(e={sub:e});for(let n in e){let o=e[n],s=i=>{this.unsubscribe(i)===!1&&console.warn(`Subscription for ${n} does not exist.`,i)};typeof o!="symbol"?z(o,s):s(o)}return!0};this.unsubscribe=e=>{let n=this.listeners.lookup.symbol[e],o=n.name,s=this.poller.get(e),i=this.listeners.functions[o],r=i?.[e],a=this.listeners.setters[o],c=a?.[e];if(s)this.poller.remove(e);else if(r)delete i[e],Object.getOwnPropertySymbols(i).length||(Object.defineProperty(r.parent,r.last,{value:r.original,writable:!0}),delete this.listeners.functions[o]);else if(c){if(delete a[e],!Object.getOwnPropertySymbols(a).length){let p=c.parent;if(p){let u=c.last,m=p[u];Object.defineProperty(p,u,{value:m,writable:!0})}delete this.listeners.setters[o]}}else return!1;delete this.listeners.lookup.symbol[e];let f=this.listeners.lookup.name[n.name];delete f[n.id],Object.getOwnPropertyNames(f).length||delete this.listeners.lookup.name[n.name]};Object.defineProperty(this.listeners,"lookup",{value:bt(),enumerable:!1,configurable:!1}),Object.assign(this.options,e),this.poller.setOptions(e.polling)}};var se=oe;var Re={},gt=["Object","Array","Map","Set"];function A(t){var e=[];if(t)do{let n=t.constructor?.name,o=gt.includes(n);gt.includes(n)&&(Re[n]||(Re[n]=[...Object.getOwnPropertyNames(globalThis[n].prototype)])),Object.getOwnPropertyNames(t).forEach(function(s){o&&Re[n].includes(s)||e.indexOf(s)===-1&&e.push(s)})}while(t=Object.getPrototypeOf(t));return e}var qe=(t,e={})=>{if(typeof t=="object")if(Array.isArray(t))t=[...t],e.accumulator=[];else{let n=A(t),o={};for(let s of n)o[s]=t[s];t=o,e.accumulator={}}return t},I=(t,e={})=>typeof t!="object"?t:(t=qe(t,e),H(t,(n,o,s)=>s.simple&&s.object?Array.isArray(o)?[]:{}:o,e),e.accumulator);var St=t=>typeof t=="object"&&typeof t.then=="function",P=(t,e)=>(typeof t=="object"&&Array.isArray(t)&&t.find(n=>St(n))&&(t=Promise.all(t)),St(t)?new Promise(n=>{t.then(async o=>{let s=e?e(o):o;n(s)})}):e?e(t):t),xt=[],V=(t,e,n=!1,o=!1,s=!1,i=[])=>{let r=n?t:qe(t);if(o&&([r,e]=[e,r]),e){let a=A(r),c=new Set(A(e));a.forEach(f=>{c.delete(f);let p=f in e,u=e[f];if(p&&u===void 0)delete r[f];else if(typeof u=="object"&&!Array.isArray(u))if(typeof r[f]=="object"){let m=r[f],v=i.indexOf(m);v!==-1?r[f]=i[v]:(i.push(m),r[f]=V(m,u,n,!1,s,i))}else r[f]=u;else if(typeof u=="function"){let m=r[f],v=typeof m=="function",_=u,S=_.__compose===!0;if(!v||!s&&!S)r[f]=_;else{let b=xt.find(x=>x.f===m),g=m;if(b||(g.__esInspectable&&(g=g.__esInspectable.target),b={f:g,list:[g]},xt.push(b)),b.list.includes(_))console.warn("This function was already composed. Ignoring duplicate.");else{let x=r[f]=function(...d){let h=g.call(this,...d);return _.call(this,...Array.isArray(h)?h:[h])};b.f=x,b.list.push(_)}}}else f in e&&(r[f]=u)}),c.forEach(f=>{let p=e[f];p!==void 0&&(r[f]=p)})}return r};var Ke={};k(Ke,{behavior:()=>An,default:()=>$e,name:()=>Tn,properties:()=>In});var kn=async(t,e)=>{let n=await fetch(t).then(o=>o.arrayBuffer());return WebAssembly.instantiate(n,e)},Cn=async(t,e)=>(e||(e={env:{abort:()=>console.log("Abort!")}}),WebAssembly.instantiateStreaming?await WebAssembly.instantiateStreaming(fetch(t),e):await kn(t,e)),vt=Cn;var Ot=(t,e)=>t[l.reference]?(console.warn("[escompose]: Falling back to ES Component reference...",e),t[l.reference]):jn(e.message),Pt=`Cannot transform ${l.compose} string without a compose utility function`;function ye(t,e){let n=typeof t=="string"?t:t[l.uri];if(n&&n.slice(-5)===".wasm"){let o=t.relativeTo??e?.relativeTo??window.location.href;o.slice(-1)[0]!=="/"&&(o+="/");let s=new URL(n,o).href;return new Promise(async i=>{let r=await vt(s,t.importOptions),a=Object.assign({},r.instance.exports);for(let c in a){let f=a[c];f instanceof WebAssembly.Memory?a[c]=new Uint8Array(f.buffer):f instanceof WebAssembly.Global&&Object.defineProperty(a,c,{get:()=>f.value,set:p=>f.value=p})}i(a)})}else if(n&&e.utilities){let o=e.utilities.bundle,s=o&&typeof o.function=="function",i=e.utilities.compile,r=i&&typeof i.function=="function";if(!s&&!r)t=Ot(t,new Error(Pt));else return new Promise(async a=>{try{if(s){let c=o.options??{};c.bundler||(c.bundler="datauri"),c.bundle||(c.collection="global"),c.relativeTo||(c.relativeTo=e.relativeTo??".");let f=o.function(n,c);await f.compile(),t=Object.assign({},f.result)}else if(r){let c=i.options??{};c.relativeTo||(c.relativeTo=e.relativeTo??"."),t=await i.function(t,c)}else throw new Error(Pt)}catch(c){t=Ot(t,c)}a(I(t))})}return I(t[l.reference]??t)}function jn(t){return{[l.element]:"p",b:{[l.element]:"b",[l.attributes]:{innerText:"Error: "}},span:{[l.element]:"span",[l.attributes]:{innerText:t}}}}var Tn="compose",J={compose:l.compose,apply:l.apply,bundle:U},An="load",In={dependents:Object.values(J)},Gn=t=>typeof t=="string"&&(t.includes("/")||t.includes("."));function Ln(t,e,n,o=!1){return t=V(t,e,o),t=wt(t,t[J.compose],n,!0,o),P(t,s=>{let i=s[J.apply];return s=i&&(typeof i=="object"||Gn(i))?wt(s,i,n,!1,o):s,P(s)})}var $e=Ln;function wt(t,e={},n={},o=!1,s=!1){Array.isArray(e)||(e=[e]);let i=P(e.map(r=>{let a=ye(r,n),c=(f,p=[],u=!0)=>{if(Array.isArray(f))f.forEach(m=>c(m,p),!0);else if(f[J.compose]){p.push(f);let m=f[J.compose];delete f[J.compose];let v=P(ye(m,n));c(v,p)}else u&&p.push(f);return p};return P(a,f=>c(f))}));return P(i,r=>{let a=r.flat(),c={};return a.forEach(f=>c=V(c,f,!1,!1)),V(t,c,s,o)})}var ie=Symbol("return");var Fn=t=>typeof t=="function"&&t.hasOwnProperty("prototype")&&!t.hasOwnProperty("arguments");function ze(t,e={},n={}){if(R||t instanceof NodeList&&(t=Array.from(t)),typeof t=="string")t={[l.apply]:t};else if(typeof t=="function")Fn(t)?t=new t(e,n):(delete t.__,t={[l.default]:t});else if(!R&&t instanceof Element){let o=t[l.component];if(o){e=I(e);let s=e.__compose,i=e.__apply;return delete e.__compose,delete e.__apply,s&&(console.warn("Cannot compose a component onto an element that already has a component. Merging with the base object instead..."),e=Object.assign(s,e)),i&&(console.warn("Cannot apply a component onto an element that already has a component. Applying to the base object instead..."),e=Object.assign(e,i)),$e(o,e,n,!0),{[ie]:o}}else t={[l.element]:t}}else{if(Array.isArray(t))return t;if(typeof t=="object")t=n.clone!==!1?I(t):t;else throw new Error(`Invalid configuration type: ${typeof t}. Expected object or string.`)}return t}var Et=t=>{let e=I(t),n;return e.monitor instanceof se?(n=e.monitor,e.keySeparator=n.keySeparator):(e.monitor||(e.monitor={}),e.monitor.keySeparator||(e.keySeparator||(e.keySeparator=T),e.monitor.keySeparator=e.keySeparator),e.monitor=new se(e.monitor)),e};var kt="default",Ct="__operator",G={path:"__path",isGraphScript:"__",listeners:{value:"__listeners",branch:"__branch",bind:"__bind",trigger:"__trigger",format:"__format"}},jt=Symbol("listenerObject"),Tt=Symbol("toSet"),re=Symbol("subscriptionKey"),At=Symbol("configKey"),We=Symbol("toResolveWithKey"),Nn=t=>G.listeners.format in t||G.listeners.branch in t||G.listeners.trigger in t||G.listeners.bind in t,It="INITIALIZED",Gt="REGISTERED",Mn={},Rn={},qn={},Be=class{constructor(e,n,o){this.original={};this.active={};this.globals={};this.context={options:{}};this.rootPath="";this.status="";this.#e=[];this.#t=[];this.setInitialProperties=(e={},n,o={})=>{Object.assign(this.context,o),n&&(this.rootPath=n),this.context.options.keySeparator||(this.context.options.keySeparator=this.context.monitor.options.keySeparator),this.original=e,[{name:"active",ref:qn},{name:"from",ref:Mn},{name:"to",ref:Rn}].forEach(i=>{i.ref[this.context.id]||(i.ref[this.context.id]={}),this.globals[i.name]=i.ref[this.context.id]}),this.#o=this.getManager(),this.runEachListener(e,this.addToGlobalLog)};this.getManager=(e="from")=>{let n=e==="to"?this.globals.to:this.globals.from;return this.rootPath.split(this.context.options.keySeparator).forEach(o=>{n[o]||(n[o]={}),n=n[o]}),n[We]??this};this.onStart=e=>{let n=this.#o;n===this?this.status===It?e():this.#t.push(e):n.onStart(e)};this.runEachListener=(e,n)=>{if(!!n)for(let o in e){let s=e[o];if(!s){console.warn("Skipping empty listener:",o);continue}if(s&&typeof s=="object"){let i=s,r=o;for(let a in i)n(a,r,i[a])}else{let i=o,r=s,a=typeof r;a==="function"?n(i,"",r):a==="string"?n(i,r,r):console.error("Improperly Formatted Listener",r)}}};this.register=(e=this.original)=>{this.runEachListener(e,this.add),this.status=Gt};this.#i=e=>{let n=this.context.monitor.get(e.path,"info");if(typeof n.value=="function"){let o=Array.isArray(e.args)?e.args:[e.args];n.value(...o)}else console.error("Cannot yet trigger values...",e)};this.initialize=e=>{this.status?this.status===Gt?(this.status=It,this.#e.forEach(this.#i),this.#t.forEach(n=>n()),this.#t=[],this.#e=[]):this.#i(e):this.#e.push(e)};this.start=()=>{this.register(),this.initialize()};this.#s=e=>{let n=this.context.monitor.options.keySeparator;return!e||!this.rootPath||this.rootPath===e.slice(0,this.rootPath.length)&&e[this.rootPath.length]===n?e:[this.rootPath,e].join(n)};this.#n=e=>{let n={absolute:{},relative:{}};e=this.#s(e);let o=this.rootPath?e.replace(`${this.rootPath}.`,""):e,s=e.split(this.context.options.keySeparator);n.absolute.array=[this.context.id,...s],n.relative.array=o.split(this.context.options.keySeparator);let i=this.context.monitor.get(n.absolute.array,void 0);if(this.context.graph){if(i&&this.context.bound)n.absolute.array=[this.context.id,this.context.bound,...n.absolute.array.slice(1)],n.relative.array.unshift(this.context.bound);else if(!i){let p=n.relative.array.join(this.context.options.keySeparator);i=this.context.graph.get(p)}}let r=i&&typeof i=="object"&&G.isGraphScript in i,a=i&&r&&i[Ct],c=i&&i[kt],f=a?Ct:c?kt:void 0;return f&&(n.absolute.array.push(f),n.relative.array.push(f)),n.absolute.value=n.absolute.array.slice(1).join(this.context.options.keySeparator),n.relative.value=n.relative.array.join(this.context.options.keySeparator),n};this.add=(e,n,o=!0,s)=>{let i=performance.now();if(!o)return;let r=this.#n(e),a=this.#n(n),c=r.absolute.value;s||(s=this.globals.active[c]?.[re]),s||(s=this.context.monitor.on(r.absolute.array,(v,_,S)=>this.activate(v,S),{ref:this.context.instance,path:r.relative.array})),typeof o=="string"&&(o=a.absolute.array.slice(1).join(this.context.options.keySeparator));let f={value:o,[jt]:!0};[this.active,this.globals.active].forEach(v=>{v[c]||(v[c]={});let _=v[c];_[re]||Object.defineProperty(_,re,{value:s,configurable:!0}),_[a.absolute.value]=f});let u=o[G.listeners.trigger];u&&this.#o.initialize({path:r.absolute.array,args:u}),this.addToGlobalLog(c);let m=performance.now();return globalThis.escomposePerformance.listeners.create.push(m-i),f};this.addToGlobalLog=(e,n="from")=>{let o=this.#s(e),s=n==="to"?this.globals.to:this.globals.from;o.split(this.context.options.keySeparator).forEach(r=>{s[r]||(s[r]={}),s=s[r],s[We]||(s[We]=this)})};this.remove=(e,n)=>{let o=this.#n(e),s=this.#n(n),i=[o.absolute.value,s.absolute.value];[{ref:this.active,path:i},{ref:this.globals.active,path:i,unlisten:!0}].forEach(a=>{let{ref:c,path:f,unlisten:p}=a,u=c[f[0]];if(typeof u=="object"){if(delete u[f[1]],Object.keys(u).length===0){delete c[f[0]];let m=u[re];p&&m&&this.context.monitor.remove(m),delete u[re]}}else delete c[f[0]]})};this.clear=e=>{let n=this.#s(e);Object.keys(this.active).forEach(o=>{Object.keys(this.active[o]).forEach(s=>{(!n||o.slice(0,n.length)===n||s.slice(0,n.length)===n)&&this.remove(o,s)})})};this.has=(e,n=this.active)=>!!n[e];this.get=(e,n=this.active)=>n[e];this.activate=(e,n)=>{[{info:this.get(e,this.globals.active),name}].forEach(s=>{let i=s.info;if(i)if(i[jt]){let r=performance.now();this.pass(e,{value:i.value,parent:this.active,key:s.name,subscription:i.subscription,__value:!0},n);let a=performance.now();globalThis.escomposePerformance.listeners.resolve.push(a-r)}else if(typeof i=="object"){let r=performance.now();for(let a in i){this.pass(e,{parent:i,key:a,subscription:i[a].subscription,value:i[a].value},n);let c=performance.now();globalThis.escomposePerformance.listeners.resolve.push(c-r)}}else console.error("Improperly Formatted Listener",i)})};this.pass=(e,n,o)=>{let s=this.context.id,i=n?.__value,r=n.parent,a=n.key,c=n.parent[a];n=c.value;let f=c?.[At],p=n,u=typeof n,m=(b,g)=>{let x=this.context.monitor.get(b,"info");if(x.exists){let d=x.value,O={value:typeof d!="function"&&!d?.default?Tt:d,bound:x.parent};return g&&(n=O.value,r[a]=O),O}else return{value:void 0}},v=b=>{let g=[s];return g.push(...a.split(this.context.options.keySeparator)),m(g,b)},_=b=>{let g=[s],x=[];return this.rootPath&&x.push(...this.rootPath.split(this.context.options.keySeparator)),x.push(...b.split(this.context.options.keySeparator)),g.push(...x),g};if(typeof n=="boolean")i?console.error(`Cannot use a boolean for ${G.listeners.value}...`):v(!0);else if(u==="string"){let b=_(p);m(b,!0),i&&(r[a]={[p]:r[a]},a=p)}else n&&u==="object"&&Nn(p)&&("value"in p?i?n=r[a]=p.value:n=r[a].value=p.value:v(!0),p&&p&&(f=p),Object.defineProperty(r[a],At,{value:f}));let S=!0;if(f){let b=G.listeners.value;if(b in f){let g=_(f[b].original??f[b]);if(typeof f[b]=="string"){let x=this.context.monitor.get(g);x?f[b]={value:x,original:f[b]}:n=`because ${g.slice(1).join(this.context.options.keySeparator)} does not point correctly to an existing component.`}else f[b].value.__parent||(n=`because ${f[b].original??s.toString()} has become unparented.`)}else{let g=G.listeners.branch,x=G.listeners.format;if(g in f&&(f[g].find(h=>{let y=[];"if"in h&&y.push(h.if(o)),"is"in h&&y.push(h.is===o);let O=y.length>0&&y.reduce((w,E)=>w&&E,!0);return O&&"value"in h&&(o=h.value),O})||(S=!1)),x in f)try{o=f[x](o),o===void 0&&(S=!1)}catch(d){console.error("Failed to format arguments",d)}}}if(S&&o!==void 0){let b=Array.isArray(o)?o:[o];if(n===Tt){let g=[s];g.push(...a.split(this.context.options.keySeparator));let x=g.pop(),d=this.context.monitor.get(g,"info");d.value?d.value[x]=o:console.error(`Cannot set value on ${g.filter(h=>typeof h!="symbol").join(this.context.options.keySeparator)} from ${e}`)}else if(n?.default)n.default.call(n,...b);else if(typeof n=="function"){let g=f?.[G.listeners.bind]?.value??c.bound??this.context.instance;g?n.call(g,...b):n(...b)}else{let g=a?`listener: ${e} \u2014> ${a}`:`listener from ${e}`;r?(console.warn(`Deleting ${g}`,n),delete r[a]):console.error(`Failed to add ${g}`,n)}}};(e||n||o)&&this.setInitialProperties(e,n,o)}#e;#t;#o;#i;#s;#n},Lt=Be;var be=t=>t.includes(l.isGraphScript)||t==="default",$n=["Object","Array"],Kn=t=>{let e=!1;return H(t,(n,o,s)=>{if(s.path.length>1&&!s.path.find(r=>r==="__")&&be(n))return e=s.path,F},{ignore:["__"],condition:(n,o)=>{let s=o?.constructor?.name,i=o?.__props?.constructor?.name;return!(!$n.includes(s)&&!!globalThis[s]||!!globalThis[i])}}),e};function De(t){if(!t||typeof t!="object")return null;let e=Object.entries(t).map(([o,s])=>{let i=typeof t=="object"||typeof t=="function";if(!o.includes(l.isGraphScript)&&s&&i?Object.keys(s).find(be):!1)return{ref:s,parent:t,name:o}}).filter(o=>o&&o.ref),n=e.length>0;if(!n){let o=Kn(t);if(o){let s=o.slice(0,-2),i=t;s.forEach(a=>{i=i[a],i.__=!0});let r=o[0];e=[{ref:t[r],parent:t,name:r}],n=!0}}return n?e:null}var ge=class{constructor(e){this.pushToState={};this.data={};this.triggers={};this.setState=e=>{console.log("Setting state",e),Object.assign(this.data,e);for(let n of Object.getOwnPropertyNames(e))this.triggers[n]&&this.triggers[n].forEach(o=>o.onchange(this.data[n]));return this.data};this.setValue=(e,n)=>{console.log("Setting value",e,n,this.triggers),this.data[e]=n,this.triggers[e]&&this.triggers[e].forEach(o=>o.onchange(this.data[e]))};this.subscribeTrigger=(e,n)=>{if(e){this.triggers[e]||(this.triggers[e]=[]);let o=this.triggers[e].length;return this.triggers[e].push({sub:o,onchange:n}),this.triggers[e].length-1}else return};this.unsubscribeTrigger=(e,n)=>{let o=this.triggers[e];if(o)if(!n)delete this.triggers[e];else{let s,i=o.find((r,a)=>{if(r.sub===s)return s=a,!0});return i&&o.splice(s,1),this.onRemoved&&this.onRemoved(i),!0}};this.subscribeTriggerOnce=(e,n)=>{let o,s=i=>{n(i),this.unsubscribeTrigger(e,o)};o=this.subscribeTrigger(e,s)};this.getTrigger=(e,n)=>{for(let o in this.triggers[e])if(this.triggers[e][o].sub===n)return this.triggers[e][o]};typeof e=="object"&&(this.data=e)}};var Rs=new ge;function Se(t){return zn(t)==="class"}function zn(t){return typeof t=="function"?t.prototype?Object.getOwnPropertyDescriptor(t,"prototype").writable?"function":"class":t.constructor.name==="AsyncFunction"?"async":"arrow":""}var Ue={};k(Ue,{default:()=>Hn,name:()=>Wn,properties:()=>Dn,required:()=>Bn});var Wn="props",Bn=!0,Dn={dependents:["__props"]},Nt,Mt=(t,e,n,o=e)=>{n||(n=A(e)),n.forEach(s=>{if(!(s in t)){let i={get:()=>o[s],set:r=>{o[s]=r},enumerable:!0,configurable:!1};o!==e&&Object.defineProperty(o,s,i),Object.defineProperty(t,s,i)}})},Un=t=>{let e=t.__props,n;return Object.defineProperty(t,"__props",{get:()=>n,set:o=>{if(typeof o!="object"&&!Se(o))console.warn("Props must be an object");else{let s=A(o);if(!n)n=o,Nt=s;else{let i=n;n={},Mt(n,i,Nt)}Mt(t,o,s,n)}},enumerable:!1,configurable:!1}),e&&(t.__props=e),t},Hn=Un;var Ve={};k(Ve,{default:()=>Qn,name:()=>Jn,properties:()=>Xn,required:()=>Yn});var Bs={dependencies:[l.isGraphScript,l.parent],dependents:[]},Vn=(t,e,n={})=>{let o=t[l.isGraphScript],s=t[l.parent],i=o.name;s=(!R&&s instanceof Element?s?.[l.component]:s)??t[l.parent];let r={value:"",writable:!0};if(s&&s[l.isGraphScript]&&typeof i=="string"){let c=s,f=[];for(;c&&c[l.isGraphScript];){let p=c[l.isGraphScript].name;if(typeof p=="string")f.push(p);else{typeof p=="symbol"?o.root=p:console.error("No graph reset occured for",p);break}c=c[l.parent]}r.value=[...f.reverse(),i],r.value=r.value.join(n.keySeparator??".")}Object.defineProperty(o,"path",r)},He=Vn;var Jn="parent",Yn=!0,Xn={dependencies:[l.isGraphScript],dependents:[]},Zn=(t,e,n)=>{let o=t[l.isGraphScript];o.parent={callbacks:[],add:function(r){this.callbacks.push(r)},get:()=>i};let i=t[l.parent]??e[l.parent];Object.defineProperty(t,l.parent,{get:()=>o.parent.get(),set:r=>{let a=i&&!r;if(i?.[l.isGraphScript]){let c=o.name;delete i[c],i.__.components.delete(c)}if(i=r,i?.[l.isGraphScript]){let c=o.name;i[c]&&console.error("OVERWRITING EXISTING PROPERTY ON PARENT!"),i[c]=t,i.__.components.set(c,t)}if(o.parent.callbacks.forEach(c=>c.call(t,r)),He(t,void 0,n),a)t[l.isGraphScript].stop.run();else if(i){let c=o.connected,f=c instanceof Function;t[l.isGraphScript].start.run(),f&&c()}}}),He(t,void 0,n)},Qn=Zn;var Rt=(t,e,n,o)=>P(o,()=>t.call(e,...n)),qt=(t,e=[],n)=>{if(t.length)if(t.length===1)Rt(t[0],n,e);else return t.reduce((o,s)=>Rt(s,n,e,o))},eo=(t,e,n=[],o)=>t.reduce((s,i)=>P(s,r=>{let c=(typeof i=="function"?i:i.default)(r,...n);return o&&o(c)?r:c}),e),xe=(t,e,n)=>{let{main:o,overrides:s,options:i}=e,r;if(!Array.isArray(t)){if(!t[n])return o;let f=t;switch(t=f[n]??[],n){case"activate":r=[...f.load??[]];break;case"start":r=[...f.load??[],...f.activate??[]];case"stop":r=[...f.load??[],...f.activate??[],...f.start??[]];break}}let c=no(o,t,r);return c?eo(c,o,[s,i],f=>!f||typeof f!="object"):o},to=t=>{let e={};return t.forEach(n=>{let o=typeof n=="function"?"activate":n.behavior??"activate";(e[o]=e[o]??[]).push(n)}),e},no=(t,e,n=[])=>{let o=A(t).filter(a=>a.slice(0,2)==="__"),i=[...Object.values(Te),...n.map(a=>typeof a=="function"?[]:a.properties.dependents).flat()];return e.filter(a=>{if(a&&typeof a=="object"){let c=a.name,{dependencies:f,dependents:p=[]}=a.properties,u=a.required||!f;if(!u&&f){let m=c?` (${c})`:"";if(p.find(_=>o.includes(_))){let _={};f.forEach(b=>_[b]=i.includes(b));let S=f.filter(b=>!i.includes(b));S.length&&console.warn(`The loader${m} for ${f.join(", ")} might be loaded too early, since we are missing the following dependencies: ${S.join(", ")}`),u=!0}}return u&&p&&i.push(...p),u}})};function $t(t,e="main"){let{callbacks:n}=this;return n[e].push(t),!0}function oo(t){let{callbacks:e,name:n}=this;if(!this.value){let o=n==="stop",s=t[l.isGraphScript],i=o?s.stop.initial:t[l[n]];this.value=!0,o||(s.stop.value=!1);let r=i&&!o?[...e.before,i,...e.main]:[...e.before,...e.main],a=qt(r,[t],t);return P(a,()=>{let c=Array.from(t[l.isGraphScript].components.entries()),f=P(c.map(async([p,u])=>{let m=u[l.promise];return m&&typeof m.then=="function"&&(u=c[p]=await m),await u[l.isGraphScript][n].run()}));return P(f,()=>{let p=qt(e.after,[t],t);return P(p,()=>{if(o){i&&i.call(t,t),s.flow.clear();let u=t[l.isGraphScript].path,m=t,v=m[l.parent];for(;v&&v[l.isGraphScript]!==void 0;){let _=m[l.parent];if(_){if(m=_,m){let S=m[l.isGraphScript];S&&S.flow.clear(u)}}else break}s.start.value=!1}return!0})})})}}function ae(t,e=[],n){let o=performance.now(),s=n.parent,{parentObject:i,toApply:r={},callbacks:a={},opts:c={},name:f=Symbol("root")}=n,p=t;if(t=ze(t,r,c),t[ie])return t[ie];if(Array.isArray(t))return P(t.map(b=>ae(b,e,n)));t[l.isGraphScript]=so(f,n,{parent:s,original:p,loaders:e});let u=to(e),m=xe(u,{main:t,overrides:r,options:c},"load"),v=P(m,b=>{let g=!b[l.parent]&&s?{[l.parent]:s}:{},x=xe([Ve],{main:b,overrides:g,options:c}),d=xe([Ue],{main:x}),h=xe(u,{main:d,overrides:r,options:c},"activate");return P(h,y=>{y.__.ref=y,i&&(i[f]=y),typeof f=="symbol"&&a.onRootCreated&&a.onRootCreated(f,y),a.onInstanceCreated&&a.onInstanceCreated(y.__.path,y);let O=y[l.isGraphScript],w=De(d),E=w?w.map(N=>{let $=Object.assign({},n),X=$.name=N.name;delete $.toApply,$.parentObject=N.parent,$.parent=y;let D=N.ref;if(D)if(D.__?.symbol){let Z=D.__.parent;Z&&console.error(`Changing parent of existing component (${D.__.path}) from ${Z.__.path} to ${O.path}`),D.__parent=y,y[l.isGraphScript].components.set(X,h)}else{let Z=ae(D,e,$);Object.defineProperty(N.parent[X],l.promise,{value:Z,writable:!1});let Xt=P(Z,nt=>(O.components.set(X,nt),nt));O.components.set(X,Xt)}else delete N.parent[X],console.error("No reference found for nested component",N)}):[],L,B=new Promise(N=>L=async()=>{O.resolved=!0,N(!0)});return Object.defineProperty(y,`${l.resolved}`,{value:B}),O.resolved=!1,P(E,()=>io(y,a,L)),y})}),S=performance.now()-o;return P(v,b=>{if(!Array.isArray(b)){let x=performance.now()-o;P(b.__resolved,()=>{let h=performance.now()-o;globalThis.escomposePerformance.resolve.push(x),globalThis.escomposePerformance.resolveAll.push(h),globalThis.escomposePerformance.create.push(S)})}}),v}function so(t,e,n={}){let{parent:o,original:s,loaders:i}=n,r=typeof t=="symbol",a=o?.[l.isGraphScript].path,f=(a?[a,t]:typeof t=="string"?[t]:[]).join(e.keySeparator??T),p={name:t,symbol:Symbol("isGraphScript"),root:r?t:o[l.isGraphScript].root,path:f,options:e,original:s,states:{},components:new Map,connected:!1,resolved:!1,flow:new Lt,create:m=>(e.loaders||(e.loaders=i),Kt(m,void 0,e)),stop:{name:"stop",value:!1,add:$t,callbacks:{before:[],main:[],after:[]}},start:{name:"start",value:!1,add:$t,callbacks:{before:[],main:[],after:[]}}},u=function(){return oo.call(this,p.ref)};return p.start.run=u.bind(p.start),p.stop.run=u.bind(p.stop),p}function io(t,e,n){let o=t[l.isGraphScript];for(let r in t){let a=t[r];if(typeof a=="function"&&!Se(a)){let c=t[l.proxy]??t;t[r]=a.bind(c)}}o.stop.initial=t[l.stop],t[l.stop]=o.stop.run;let s=A(t);for(let r of s)if(be(r)){let a=Object.getOwnPropertyDescriptor(t,r);a?.enumerable&&Object.defineProperty(t,r,{...a,enumerable:!1})}let i=t[l.parent];t[l.parent]=i,e.onInstanceReady&&e.onInstanceReady(t.__.path,t),n()}globalThis.escomposePerformance={create:[],resolve:[],resolveAll:[],listeners:{create:[],resolve:[]},averages:function(){let t={create:0,resolve:0,resolveAll:0,listeners:{create:0,resolve:0}};for(let e in t)if(typeof this[e]=="object"&&!Array.isArray(this[e]))for(let n in this[e])t[e][n]=this[e][n].reduce((o,s)=>o+s,0)/this[e][n].length;else t[e]=this[e].reduce((n,o)=>n+o,0)/this[e].length;return t}};var ro=new se,Je=(t,e={},n={})=>{let o=Et(n),s={onRootCreated:(a,c)=>o.monitor.set(a,c,o.listeners),onInstanceCreated:(a,c)=>{if(o.listen!==!1){let f=c[l.listeners.value]??{},p=c[l.isGraphScript].flow;if(p.setInitialProperties(f,a,{id:c[l.isGraphScript].root,monitor:o.monitor,options:o}),c[l.listeners.value]=f,l.trigger in c){Array.isArray(c[l.trigger])||(c[l.trigger]=[]);let u=c[l.trigger];p.onStart(()=>c.default(...u)),delete c[l.trigger]}}},onInstanceReady:(a,c)=>c[l.isGraphScript].flow.start()},i=o.loaders,r=ae(t,i,{toApply:e,opts:o,callbacks:s,waitForChildren:!1});return P(r,a=>{let c=Array.isArray(a),f=c?a:[a];return f.map(p=>{if(p[l.parent]||p.__.path===""){let u=p[l.isGraphScript];if(u.start.value===!1){let v=u.start.run();return P(v,zt)}}else return p}),c?f:f[0]})},Kt=Je;var zt=P,Wt=I;var Xe={};k(Xe,{default:()=>Ut,name:()=>ho,properties:()=>mo,required:()=>_o});var Pe={};k(Pe,{default:()=>fo,define:()=>Oe,name:()=>lo,properties:()=>co});var lo="define",co={dependents:[l.webcomponents],dependencies:[l.element,l.component,l.parent]},fo=t=>{let e=t[l.webcomponents]??{};for(let n in e){let o=e[n],s=o[l.element];s.name&&s.extends&&Oe(s,t,o)}return t},ve={},Bt=document.createElement;document.createElement=function(t,e){let n=ve[t];return n&&!n.autonomous?Bt.call(this,n.tag,{is:t}):Bt.call(this,t,e)};var po={li:"LI",ol:"OL",ul:"UL",br:"BR",p:"Paragraph",textarea:"TextArea",a:"Anchor"},Ye=!1,Oe=(t,e,n=e)=>{if(ve[t.name])console.log("Already created component...");else{let o=I(n),s=Ye?"":po[t.extends]??t.extends[0].toUpperCase()+t.extends.slice(1),i=new Function(`

        class ESComponentBase extends HTML${s}Element { 
            #properties;
            constructor(properties={}){
                super()
               this.#properties = properties
            }
        }
        return ESComponentBase;

        `)();class r extends i{constructor(p){super(p);o[l.element]=this,e[l.isGraphScript].create(o)}connectedCallback(){let p=this[l.component],u=p[l.parent];p[l.parent]=u}disconnectedCallback(){console.log("Custom element removed from page.")}adoptedCallback(){console.log("Custom element moved to new page.")}attributeChangedCallback(p,u,m){console.log("Custom element attributes changed.",p,u,m)}}ve[t.name]={class:r,autonomous:Ye,tag:t.extends};let a=ve[t.name].class;Ye?customElements.define(t.name,a):customElements.define(t.name,a,{extends:t.extends})}};var uo=(t="svg",e)=>document.createElementNS("http://www.w3.org/2000/svg",t,e);var Dt=(t,e)=>t[0]==="svg"||e&&e.__element instanceof SVGElement?uo(...t):document.createElement(...t),ho="element",_o=!0,mo={dependents:[l.element,l.attributes,l.resize,l.childPosition,l.editor,l.component,l.attribute,l.connected],dependencies:[l.parent,l.isGraphScript,l.proxy]};function Ut(t,e,n={}){let o=t[l.isGraphScript],s=o.states,i=o.name,r=t[l.parent],a=t[l.element],c=t[l.attributes],f;if(!(a instanceof Element)){let d="div";if(a&&typeof a=="object"&&a.name&&a.extends){let O=a,w=t[l.element];Oe(w,t),t[l.element]=a=O.name}a===void 0?a=d:Array.isArray(a)?a=Dt(a,r):typeof a=="object"&&(f=a,f.selectors?a=document.querySelector(f.selectors):f.id?a=document.getElementById(f.id):a=d),typeof a=="string"&&(a=Dt([a],r));let y=Symbol("no input to the default function");t.hasOwnProperty("default")||(t.default=function(O=y){return O!==y&&(this[l.element].innerText=O),this[l.element]})}if(!(a instanceof Element))throw new Error("Element not created for "+i);let p=s||{};p.element=a,p.attributes=c,r instanceof Element?p.parentNode=r:p.parentNode=r?.[l.element]instanceof Element?r[l.element]:a.parentNode,p.onresize=t[l.resize],p.onresizeEventCallback=void 0;let u=p;typeof i!="string"&&(i=`${a.tagName??"element"}${Math.floor(Math.random()*1e15)}`),a.id||(a.id=i);let m;Object.defineProperty(t,`${l.connected}`,{value:new Promise(d=>m=async()=>{o.connected=!0,d(!0)})}),o.connected=m;let v=(d,h)=>d.slice(0,2)==="on"&&typeof h=="function",_=(d,h,y)=>!v(d,h)&&typeof h=="function"?h.call(y):h,S=d=>{if(t[l.element]instanceof Element)for(let h in d)if(h==="style")for(let y in d.style)t[l.element].style[y]=_(h,d.style[y],t);else{let y=d[h];if(v(h,y)){let O=y;t[l.element][h]=(...w)=>{let E=t[l.proxy]??t;return O.call(E??t,...w)}}else{let O=_(h,y,t);t[l.element].setAttribute(h,O);try{t[l.element][h]=O}catch{}}}};Object.defineProperty(t,l.attributes,{get:()=>u.attributes,set:d=>{u.attributes=d,u.attributes&&S(u.attributes)}}),Object.defineProperty(t,l.element,{get:function(){if(u.element instanceof Element)return u.element},set:function(d){if(d instanceof HTMLElement){u.element!==d&&(u.element.insertAdjacentElement("afterend",d),u.element.remove()),u.element=d;let h=t[l.isGraphScript];if(h){let y=h.components;for(let O in y){let w=y[O];w&&w[l.isGraphScript]&&P(w,E=>E[l.parent]=d)}}S(u.attributes)}}});let b=o.parent.get;o.parent.get=()=>{let d=b(),h=t[l.element].parentNode;return h?h.hasAttribute(l.attribute)?h[l.component]:{[l.element]:h}:d},o.parent.add(function(d){if(typeof d=="string"){let y=document.querySelector(d);y?d=y:d=document.getElementById(d)}d?.[l.element]instanceof Element&&(d=d[l.element]);let h=this[l.element].parentNode;if(h!==d)if(this[l.element]instanceof Element){if(h&&this[l.element].remove(),d instanceof Element){let y=this[l.childPosition],O=this[l.element],w=o.editor;w&&(O=w);let E=d.children.length,L=E&&y!==void 0?d.children[y]??d.children[E-1]:void 0;if(L){let $=L[l.component][l.childPosition]<y?"afterend":"beforebegin";L.insertAdjacentElement($,O)}else d.appendChild(O);w&&w.setComponent(this)}}else console.error("No element was created for this Component...",this)});let g=t[l.resize];Object.defineProperty(t,l.resize,{get:function(){return g},set:function(d){u.onresize=d,u.onresizeEventCallback&&window.removeEventListener("resize",u.onresizeEventCallback),u.onresize&&(u.onresizeEventCallback=h=>{if(u.onresize&&t[l.element]instanceof Element){let y=t[l.proxy]??t;return d.call(y,h)}},window.addEventListener("resize",u.onresizeEventCallback))}});let x=n?.utilities;if(x&&t[l.editor]){let d=t[l.editor],h=x.code?.class;if(h||(typeof d=="function"?h=d:console.error("Editor class not provided in options.utilities.code")),h){let y=x.code?.options??{};y=typeof d=="boolean"?y:{...y,...d};let O=y.bind,w=new h(y);if(w.start(),o.editor=w,O!==void 0){let E=t,L=t[l.isGraphScript];O.split("/").forEach(B=>{if(B==="..")E=E[l.isGraphScript].states.parentNode[l.component];else{if(B===".")return;E=E[B]}}),L.boundEditors?L.boundEditors.push(w):L.boundEditors=[w]}}}return t[l.element][l.component]=t,t[l.element].setAttribute(l.attribute,""),t[l.element]=t[l.element],o.start.add(()=>{t[l.resize]=u.onresize,u.parentNode&&(t[l.parent]=u.parentNode)},"before"),o.stop.add(()=>{t[l.element].remove();let d=`${l.editor}Attached`;t[d]&&t[d].remove()}),t}var Ze={};k(Ze,{default:()=>So,name:()=>yo,properties:()=>go,required:()=>bo});var yo="start",bo=!0,go={dependents:[l.source],dependencies:[U,l.isGraphScript,l.editor,l.parent,l.proxy,l.connected,l.promise,l.resolved]},So=t=>{t[l.isGraphScript].start.add(()=>vo(t))},xo=(t,e)=>t[l.isGraphScript].start.value=e;function vo(t,e=[],n){Oo.call(t,n);let o=Po.call(t,e);return xo(t,!0),o}async function Oo(t){let e=this[l.isGraphScript];await this[l.connected],e.connected=!0;let n=e.boundEditors;return n&&n.forEach(o=>o.setComponent(this)),t&&await t(),this}function Po(t=[]){let e=this[l.isGraphScript],o=this[l.parent]?.[l.isGraphScript]?.editor;o&&(e.editor=o);let s=this[U];if(s){typeof s=="function"&&(s=this[l.source]=s()),delete this[U];let i=this[l.isGraphScript].path;e.editor&&e.editor.addFile(i,s)}return t.forEach(i=>i.call(this)),this}var et={};k(et,{default:()=>Ht,name:()=>wo,properties:()=>Eo});var q={},wo="animate",Qe=l.animate,Eo={dependents:[l.animate]};function Ht(t){if(t[Qe]){let e=t[Qe],n=Math.random(),o=typeof e=="number"?e:"global",s;if(q[o])s=()=>{t.default(),q[o].objects[n]=t};else{let i=q[o]={objects:{[n]:t}},r=i.objects,a=()=>{for(let c in r)r[c].default()};if(o==="global"){let c=()=>{a(),i.id=window.requestAnimationFrame(c)};s=c,q[o].stop=()=>{window.cancelAnimationFrame(i.id),i.cancel=!0}}else s=()=>{a(),i.id=setInterval(()=>a(),1e3/o)},q[o].stop=()=>clearInterval(i.id)}t[l.isGraphScript].start.add(s),t[l.isGraphScript].stop.add(()=>{delete q[o].objects[n],t[Qe]=e,Object.keys(q[o].objects).length===0&&(q[o].stop(),delete q[o])})}}var Y=[];Y.push(Ke);R||Y.push(Xe,Pe);Y.push(Ze);Y.push(et);var Vt=Wt;var Jt=(t,e,n={})=>(n.loaders?n.loaders=Array.from(new Set([...n.loaders,...Y])):n.loaders=Y,Je(t,e,n));var Co=t=>{let e=document.getElementById(t);e?e.scrollIntoView({}):console.error(`No component found for path: ${t}`)},jo=!1,tt=class{constructor(e){this.paths={};this.set=(e,n)=>{n===void 0?delete this.paths[e]:this.paths[e]=n};this.setRoot=e=>this.set("",e);this.get=(e=this.getPath())=>{let n=this.paths;return e.split(/\.|\//).forEach(o=>n=n[o]??n[""][o]),n};this.load=(e,n,o=!0)=>{let s=e===void 0?this.getPath():e,i=this.get(s);i&&n&&n.preventDefault();let r=!i&&(!this.loaded||this.loaded.path!=="")&&o;if(r&&(s="",i=this.get("")),i){let a=this.options.element.root,c=s?this.options.element.target:void 0;if(c){(!this.loaded||this.loaded.path!==""&&s!=="")&&this.load(""),typeof c=="string"?a=document.querySelector(c):a=c;let u=[...a.children];if(a)for(let m of u)m.remove()}else this.loaded&&this.loaded.ref.__element.remove();let f=Vt(i),p=Jt(f,{__parent:a});return console.log("Loaded",s,p),s===""&&(this.root&&this.root.__element.remove(),this.root=p),this.loaded={path:s,ref:p},c&&window.scrollTo(0,0),this.loaded}else Co(s);r&&this.navigate(void 0,void 0,!1)};this.navigate=(e=this.getPath(),n,o=!1)=>{let s=e.split(/\.|\//).join(this.options.spa?"/":".");history.pushState({},"escodeRouterURL",this.options.spa?`${window.location.origin}/${s}`:`${window.location.origin}#${s}`),this.load(s,n,o)};this.getPath=e=>(e===void 0&&(this.options.spa&&(e=window.location.pathname.slice(1)),e||(e=window.location.hash.slice(1))),e??"");e=Object.assign({},e),e.element||(e.element={root:document.body}),(typeof e.element!="object"||!("root"in e.element))&&(e.element={root:e.element}),this.options=e,window.addEventListener("beforeunload",n=>this.load(void 0,n)),window.addEventListener("popstate",n=>this.load(void 0,n)),window.addEventListener("DOMContentLoaded",n=>{jo=!0,(!this.loaded||this.loaded.path==="")&&this.load(void 0,n)})}},Yt=tt;var we=new Yt({spa:!0,element:{root:document.body,target:"#content"}});we.setRoot(ke);we.set("about",Ce);we.set("work",je);we.load();
//# sourceMappingURL=index.esm.js.map
